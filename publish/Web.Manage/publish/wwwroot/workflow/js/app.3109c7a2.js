(function(){"use strict";var e={4520:function(e,l,t){var o=t(5130),n=t(6768),a=(t(4114),t(144)),s=t(4232),i=t(6805),d=t(2647),u=t(4671),c=t(4039);const r=[{PluginsID:1,Name:"知数能(GetWebPage)",Description:"",Namespace:"",EntryFunctionName:"",ReturnValueDescription:""},{PluginsID:2,Name:"知数能(GetFile)",Description:"",Namespace:"",EntryFunctionName:"",ReturnValueDescription:""},{PluginsID:3,Name:"知数能(SendMail)",Description:"",Namespace:"",EntryFunctionName:"",ReturnValueDescription:""}],p=[{LargeModelID:1,Name:"llama3.1",MICON:"",TypeCode:1,TypeName:"",ModelOrganizationID:1,ModelOrganizationName:"OLLAMA",EndPoint:"",MConfig:"",Description:""},{LargeModelID:2,Name:"qwen2",MICON:"",TypeCode:1,TypeName:"",ModelOrganizationID:1,ModelOrganizationName:"OLLAMA",EndPoint:"",MConfig:"",Description:""},{LargeModelID:3,Name:"gemma2",MICON:"",TypeCode:1,TypeName:"",ModelOrganizationID:1,ModelOrganizationName:"OLLAMA",EndPoint:"",MConfig:"",Description:""}],k=[{KnowledgeBaseID:"111",Name:"知识库1"},{KnowledgeBaseID:"222",Name:"知识库2"}],h=[{id:"1",type:"Start",data:{label:"Start",inputs:[{varname:"User_Input",type:"string",txt:"用户输入的对话内容"}],prompt:""},position:{x:-351,y:-15}},{id:"2",type:"LargeModel",data:{label:"Large",model:{LargeModelID:2},inputs:[{varname:"Input",type:"string",txt:"上一节点处理后的结果信息"}],prompt:"",output:[{varname:"Output",type:"string",txt:"处理后返回给下一节点的信息"}]},position:{x:305,y:410}},{id:"22",type:"KnowledgeBase",data:{label:"KnowledgeBase",inputs:[{varname:"Input",type:"string",txt:"上一节点处理后的结果信息"}],knowledgeBase:[],output:[{varname:"Output",type:"string",txt:"处理后返回给下一节点的信息"}]},position:{x:-233,y:550}},{id:"3",type:"Plugins",data:{label:"Node 3",plugins:{PluginsID:1},inputs:[{varname:"Input",type:"string",txt:"上一节点处理后的信息"}],output:[{varname:"Output",type:"string",txt:"处理后返回给下一节点的信息"}]},position:{x:309,y:-89}},{id:"4",type:"Selector",data:{label:"Node 4",inputs:[{varname:"Input",type:"string",txt:"上一节点处理后的信息"}],selector:[{id:"1",inputs:"1",comparison:"",value:"1",top:0},{id:"2",inputs:"2",comparison:"",value:"2",top:0}]},position:{x:987,y:-9}},{id:"5",type:"End",data:{label:"End",output:[{varname:"Output",type:"string",txt:"上一节点处理返回的结果"}],prompt:""},position:{x:966,y:548}}],L=[{id:"e1-2",source:"1",target:"2",markerEnd:i.TG.ArrowClosed},{id:"e1-3",source:"1",target:"3",markerEnd:i.TG.ArrowClosed},{id:"e4-5",source:"4",target:"5",markerEnd:i.TG.ArrowClosed},{id:"e3-5",source:"3",target:"4",markerEnd:i.TG.ArrowClosed},{id:"e3-6",source:"2",target:"4",markerEnd:i.TG.ArrowClosed},{id:"e3-7",source:"3",target:"2",markerEnd:i.TG.ArrowClosed}],v={key:0,width:"16",height:"16",viewBox:"0 0 32 32"},m=(0,n.Lk)("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"},null,-1),F=[m],g={key:1,width:"16",height:"16",viewBox:"0 0 32 5"},b=(0,n.Lk)("path",{d:"M0 0h32v4.2H0z"},null,-1),C=[b],y={key:2,width:"16",height:"16",viewBox:"0 0 32 32"},f=(0,n.Lk)("path",{d:"M18 28A12 12 0 1 0 6 16v6.2l-3.6-3.6L1 20l6 6l6-6l-1.4-1.4L8 22.2V16a10 10 0 1 1 10 10Z"},null,-1),N=[f],_={key:3,width:"16",height:"16",viewBox:"0 0 24 24"},I=(0,n.Lk)("path",{d:"M14 20v-2h2.6l-3.2-3.2l1.425-1.425L18 16.55V14h2v6Zm-8.6 0L4 18.6L16.6 6H14V4h6v6h-2V7.4Zm3.775-9.425L4 5.4L5.4 4l5.175 5.175Z"},null,-1),E=[I],w={key:4,width:"16",height:"16",viewBox:"0 0 24 24"},X=(0,n.Lk)("path",{d:"M12 17q-2.075 0-3.537-1.463Q7 14.075 7 12t1.463-3.538Q9.925 7 12 7t3.538 1.462Q17 9.925 17 12q0 2.075-1.462 3.537Q14.075 17 12 17ZM2 13q-.425 0-.712-.288Q1 12.425 1 12t.288-.713Q1.575 11 2 11h2q.425 0 .713.287Q5 11.575 5 12t-.287.712Q4.425 13 4 13Zm18 0q-.425 0-.712-.288Q19 12.425 19 12t.288-.713Q19.575 11 20 11h2q.425 0 .712.287q.288.288.288.713t-.288.712Q22.425 13 22 13Zm-8-8q-.425 0-.712-.288Q11 4.425 11 4V2q0-.425.288-.713Q11.575 1 12 1t.713.287Q13 1.575 13 2v2q0 .425-.287.712Q12.425 5 12 5Zm0 18q-.425 0-.712-.288Q11 22.425 11 22v-2q0-.425.288-.712Q11.575 19 12 19t.713.288Q13 19.575 13 20v2q0 .425-.287.712Q12.425 23 12 23ZM5.65 7.05L4.575 6q-.3-.275-.288-.7q.013-.425.288-.725q.3-.3.725-.3t.7.3L7.05 5.65q.275.3.275.7q0 .4-.275.7q-.275.3-.687.287q-.413-.012-.713-.287ZM18 19.425l-1.05-1.075q-.275-.3-.275-.712q0-.413.275-.688q.275-.3.688-.287q.412.012.712.287L19.425 18q.3.275.288.7q-.013.425-.288.725q-.3.3-.725.3t-.7-.3ZM16.95 7.05q-.3-.275-.287-.688q.012-.412.287-.712L18 4.575q.275-.3.7-.288q.425.013.725.288q.3.3.3.725t-.3.7L18.35 7.05q-.3.275-.7.275q-.4 0-.7-.275ZM4.575 19.425q-.3-.3-.3-.725t.3-.7l1.075-1.05q.3-.275.713-.275q.412 0 .687.275q.3.275.288.688q-.013.412-.288.712L6 19.425q-.275.3-.7.287q-.425-.012-.725-.287Z"},null,-1),x=[X],D={key:5,width:"16",height:"16",viewBox:"0 0 24 24"},S=(0,n.Lk)("path",{d:"M12 21q-3.75 0-6.375-2.625T3 12q0-3.75 2.625-6.375T12 3q.35 0 .688.025q.337.025.662.075q-1.025.725-1.637 1.887Q11.1 6.15 11.1 7.5q0 2.25 1.575 3.825Q14.25 12.9 16.5 12.9q1.375 0 2.525-.613q1.15-.612 1.875-1.637q.05.325.075.662Q21 11.65 21 12q0 3.75-2.625 6.375T12 21Z"},null,-1),j=[S],V={key:6,width:"16",height:"16",viewBox:"0 0 24 24"},M=(0,n.Lk)("path",{d:"M20 19V7H4v12h16m0-16a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h16m-7 14v-2h5v2h-5m-3.42-4L5.57 9H8.4l3.3 3.3c.39.39.39 1.03 0 1.42L8.42 17H5.59l3.99-4Z"},null,-1),O=[M];var B={__name:"ToolIcon",props:{name:{type:String,required:!0}},setup(e){return(l,t)=>((0,n.uX)(),(0,n.CE)(n.FK,null,["zoomin"===e.name?((0,n.uX)(),(0,n.CE)("svg",v,F)):(0,n.Q3)("",!0),"zoomout"===e.name?((0,n.uX)(),(0,n.CE)("svg",g,C)):(0,n.Q3)("",!0),"reset"===e.name?((0,n.uX)(),(0,n.CE)("svg",y,N)):(0,n.Q3)("",!0),"update"===e.name?((0,n.uX)(),(0,n.CE)("svg",_,E)):(0,n.Q3)("",!0),"sun"===e.name?((0,n.uX)(),(0,n.CE)("svg",w,x)):(0,n.Q3)("",!0),"moon"===e.name?((0,n.uX)(),(0,n.CE)("svg",D,j)):(0,n.Q3)("",!0),"log"===e.name?((0,n.uX)(),(0,n.CE)("svg",V,O)):(0,n.Q3)("",!0)],64))}};const q=B;var T=q;const U={key:0,class:"NodeToolBox"},Q=(0,n.Lk)("div",{class:"title"},"选择节点",-1),K={class:"items iconfont"},R=["onClick"],P={class:"Name"},A=(0,n.Lk)("div",{class:"Icon RBt icon-jinrujiantouxiao"},null,-1);function H(e,l,t,o,a,i){return t.isVisible?((0,n.uX)(),(0,n.CE)("div",U,[Q,(0,n.Lk)("div",K,[(0,n.Lk)("ul",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.NodeList,((e,l)=>((0,n.uX)(),(0,n.CE)("li",{key:l,onClick:l=>i.addNode(e.NodeType)},[(0,n.Lk)("div",{class:(0,s.C4)(["Icon",e.Icon])},null,2),(0,n.Lk)("div",P,(0,s.v_)(e.NodeName),1),A],8,R)))),128))])])])):(0,n.Q3)("",!0)}var J={name:"ToolBox",props:{node:Object,isVisible:Boolean},data(){return{NodeList:[{NodeName:"大模型",NodeType:"LargeModel",Icon:"icon-LargeModel",Description:"调用大语言模型，处理变量，配合提示词，生成输出"},{NodeName:"知识库",NodeType:"KnowledgeBase",Icon:"icon-KnowledgeBase",Description:"根据输入的文本，调用知识库，获取知识库数据"},{NodeName:"插件",NodeType:"Plugins",Icon:"icon-Plugins",Description:"插件可以提供更多能力，外部操作，获取外部数据等"},{NodeName:"选择器",NodeType:"Selector",Icon:"icon-selector1",Description:"可以通过选择器的定义，链接多个下游执行节点"}]}},methods:{addNode(e){var l={id:"Node_"+this.$parent.nodes.length+1,type:e,data:{label:e},position:{x:0,y:0}};this.$emit("addNode",l)}}},z=t(1241);const Z=(0,z.A)(J,[["render",H]]);var W=Z;const $={class:"WorkFlowData"},G={class:"title"};function Y(e,l,t,o,a,i){return(0,n.uX)(),(0,n.CE)("div",$,[(0,n.Lk)("div",G,(0,s.v_)(t.title),1)])}var ee={name:"WorkFlowData",props:{title:String}};const le=(0,z.A)(ee,[["render",Y]]);var te=le;const oe={class:"Title"},ne=(0,n.Lk)("span",{class:"Icon ticon icon-LargeModel"},null,-1),ae=(0,n.Lk)("span",null,"大语言模型",-1),se={key:0,class:"Content"},ie=(0,n.Lk)("div",{class:"Description"},"调用大语言模型，处理变量，配合提示词，生成输出",-1),de={class:"LargeModel Content"},ue={class:"Title"},ce=(0,n.Lk)("span",null,"模型",-1),re={key:0},pe=["value"],ke={class:"Inputs Content"},he={class:"Title"},Le=(0,n.Lk)("span",null,"输入",-1),ve={key:0},me=(0,n.Lk)("thead",null,[(0,n.Lk)("th",null,"变量名"),(0,n.Lk)("th",null,"描述")],-1),Fe=["onUpdate:modelValue"],ge=["onUpdate:modelValue"],be={class:"Prompt Content"},Ce={class:"Title"},ye=(0,n.Lk)("span",null,"提示词（将输入变量与提示词整理，并让AI重新生成返回结果）",-1),fe={key:0},Ne=["placeholder"],_e={class:"Outputs Content"},Ie={class:"Title"},Ee=(0,n.Lk)("span",null,"输出",-1),we={key:0},Xe=(0,n.Lk)("thead",null,[(0,n.Lk)("th",null,"变量名"),(0,n.Lk)("th",null,"描述")],-1),xe=["onUpdate:modelValue"],De=["onUpdate:modelValue"],Se={name:"LargeModelNode",props:{id:String,isSelected:Boolean,data:Object,largeModel:Object},data(){return{label:this.data.label,nodeData:this.data,largeModelList:this.largeModel,isFold:!0,isFold_inputs:!0,isFold_outputs:!0,isFold_prompt:!0,isFold_largemodel:!0}},methods:{saveNode(){this.$emit("saveNode",{id:this.id,data:{...this.nodeData,label:this.label}})},saveLabel(){this.saveNode()},checkFold(){this.isFold=!this.isFold},checkFoldInputs(){this.isFold_inputs=!this.isFold_inputs},checkFoldOutputs(){this.isFold_outputs=!this.isFold_outputs},checkFoldPrompt(){this.isFold_prompt=!this.isFold_prompt},checkFoldLargeModel(){this.isFold_largemodel=!this.isFold_largemodel}}};var je=Object.assign(Se,{setup(e){return(l,t)=>((0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)((0,a.R1)(i.h7),{class:"Handle",type:"target",position:(0,a.R1)(i.yX).Left,style:{}},null,8,["position"]),(0,n.bF)((0,a.R1)(i.h7),{class:"Handle",type:"source",position:(0,a.R1)(i.yX).Right,style:{}},null,8,["position"]),(0,n.Lk)("div",{class:(0,s.C4)(["NodeBox LargeModelNode iconfont",[e.isSelected?"Selected":"",""]])},[(0,n.Lk)("div",oe,[(0,n.Lk)("span",{class:(0,s.C4)(["Icon fold",[l.isFold?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:t[0]||(t[0]=(...e)=>l.checkFold&&l.checkFold(...e))},null,2),ne,ae,(0,n.bo)((0,n.Lk)("input",{class:"label","onUpdate:modelValue":t[1]||(t[1]=e=>l.label=e),value:"{{label}}",placeholder:"备注",onBlur:t[2]||(t[2]=(...e)=>l.saveLabel&&l.saveLabel(...e))},null,544),[[o.Jo,l.label]])]),l.isFold?((0,n.uX)(),(0,n.CE)("div",se,[ie,(0,n.Lk)("div",de,[(0,n.Lk)("div",ue,[(0,n.Lk)("span",{class:(0,s.C4)(["Icon fold",[l.isFold_largemodel?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:t[3]||(t[3]=(...e)=>l.checkFoldLargeModel&&l.checkFoldLargeModel(...e))},null,2),ce]),l.isFold_largemodel?((0,n.uX)(),(0,n.CE)("div",re,[(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.nodeData.model.LargeModelID=e)},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.largeModelList,((e,l)=>((0,n.uX)(),(0,n.CE)("option",{key:l,value:e.LargeModelID},(0,s.v_)(e.ModelOrganizationName)+"("+(0,s.v_)(e.Name)+")",9,pe)))),128))],512),[[o.u1,l.nodeData.model.LargeModelID]])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",ke,[(0,n.Lk)("div",he,[(0,n.Lk)("span",{class:(0,s.C4)(["Icon fold",[l.isFold_inputs?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:t[5]||(t[5]=(...e)=>l.checkFoldInputs&&l.checkFoldInputs(...e))},null,2),Le]),l.isFold_inputs?((0,n.uX)(),(0,n.CE)("div",ve,[(0,n.Lk)("table",null,[me,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.nodeData.inputs,((e,l)=>((0,n.uX)(),(0,n.CE)("tr",{key:l},[(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":l=>e.varname=l},null,8,Fe),[[o.Jo,e.varname]])]),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":l=>e.txt=l},null,8,ge),[[o.Jo,e.txt]])])])))),128))])])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",be,[(0,n.Lk)("div",Ce,[(0,n.Lk)("span",{class:(0,s.C4)(["Icon fold",[l.isFold_prompt?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:t[6]||(t[6]=(...e)=>l.checkFoldPrompt&&l.checkFoldPrompt(...e))},null,2),ye]),l.isFold_prompt?((0,n.uX)(),(0,n.CE)("div",fe,[(0,n.bo)((0,n.Lk)("textarea",{"onUpdate:modelValue":t[7]||(t[7]=e=>l.nodeData.prompt=e),placeholder:["请输入提示词："+l.nodeData.inputs.map((e=>"{{"+e.varname+"}}")).join(",")]},null,8,Ne),[[o.Jo,l.nodeData.prompt]])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",_e,[(0,n.Lk)("div",Ie,[(0,n.Lk)("span",{class:(0,s.C4)(["Icon fold",[l.isFold_outputs?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:t[8]||(t[8]=(...e)=>l.checkFoldOutputs&&l.checkFoldOutputs(...e))},null,2),Ee]),l.isFold_outputs?((0,n.uX)(),(0,n.CE)("div",we,[(0,n.Lk)("table",null,[Xe,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.nodeData.output,((e,l)=>((0,n.uX)(),(0,n.CE)("tr",{key:l},[(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":l=>e.varname=l},null,8,xe),[[o.Jo,e.varname]])]),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":l=>e.txt=l},null,8,De),[[o.Jo,e.txt]])])])))),128))])])])):(0,n.Q3)("",!0)])])):(0,n.Q3)("",!0)],2)],64))}});const Ve=je;var Me=Ve;const Oe={class:"Title"},Be=(0,n.Lk)("span",{class:"Icon ticon icon-Plugins"},null,-1),qe=(0,n.Lk)("span",null,"插件",-1),Te={key:0,class:"Content"},Ue=(0,n.Lk)("div",{class:"Description"},"插件可以提供更多能力，外部操作，获取外部数据等",-1),Qe={class:"Plugins Content"},Ke={class:"Title"},Re=(0,n.Lk)("span",null,"插件",-1),Pe={key:0},Ae=["value"],He={class:"Inputs Content"},Je={class:"Title"},ze=(0,n.Lk)("span",null,"输入",-1),Ze={key:0},We=(0,n.Lk)("thead",null,[(0,n.Lk)("th",null,"变量名"),(0,n.Lk)("th",null,"描述")],-1),$e=["onUpdate:modelValue"],Ge=["onUpdate:modelValue"],Ye={class:"Outputs Content"},el={class:"Title"},ll=(0,n.Lk)("span",null,"输出",-1),tl={key:0},ol=(0,n.Lk)("thead",null,[(0,n.Lk)("th",null,"变量名"),(0,n.Lk)("th",null,"描述")],-1),nl=["onUpdate:modelValue"],al=["onUpdate:modelValue"],sl={name:"PluginsNode",props:{id:String,isSelected:Boolean,data:Object,plugins:Object},data(){return{label:this.data.label,nodeData:this.data,pluginsList:this.plugins,isFold:!0,isFold_inputs:!0,isFold_outputs:!0,isFold_plugins:!0}},methods:{saveNode(){this.$emit("saveNode",{id:this.id,data:{...this.nodeData,label:this.label}})},saveLabel(){this.saveNode()},checkFold(){this.isFold=!this.isFold},checkFoldInputs(){this.isFold_inputs=!this.isFold_inputs},checkFoldOutputs(){this.isFold_outputs=!this.isFold_outputs},checkFoldPlugins(){this.isFold_plugins=!this.isFold_plugins}}};var il=Object.assign(sl,{setup(e){return(l,t)=>((0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)((0,a.R1)(i.h7),{class:"Handle",type:"target",position:(0,a.R1)(i.yX).Left,style:{}},null,8,["position"]),(0,n.bF)((0,a.R1)(i.h7),{class:"Handle",type:"source",position:(0,a.R1)(i.yX).Right,style:{}},null,8,["position"]),(0,n.Lk)("div",{class:(0,s.C4)(["NodeBox Plugins iconfont",[e.isSelected?"Selected":"",""]])},[(0,n.Lk)("div",Oe,[(0,n.Lk)("span",{class:(0,s.C4)(["Icon fold",[l.isFold?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:t[0]||(t[0]=(...e)=>l.checkFold&&l.checkFold(...e))},null,2),Be,qe,(0,n.bo)((0,n.Lk)("input",{class:"label","onUpdate:modelValue":t[1]||(t[1]=e=>l.label=e),value:"{{label}}",placeholder:"备注",onBlur:t[2]||(t[2]=(...e)=>l.saveLabel&&l.saveLabel(...e))},null,544),[[o.Jo,l.label]])]),l.isFold?((0,n.uX)(),(0,n.CE)("div",Te,[Ue,(0,n.Lk)("div",Qe,[(0,n.Lk)("div",Ke,[(0,n.Lk)("span",{class:(0,s.C4)(["Icon fold",[l.isFold_plugins?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:t[3]||(t[3]=(...e)=>l.checkFoldPlugins&&l.checkFoldPlugins(...e))},null,2),Re]),l.isFold_plugins?((0,n.uX)(),(0,n.CE)("div",Pe,[(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.nodeData.plugins.PluginsID=e)},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.pluginsList,((e,l)=>((0,n.uX)(),(0,n.CE)("option",{key:l,value:e.PluginsID},(0,s.v_)(e.Name),9,Ae)))),128))],512),[[o.u1,l.nodeData.plugins.PluginsID]])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",He,[(0,n.Lk)("div",Je,[(0,n.Lk)("span",{class:(0,s.C4)(["Icon fold",[l.isFold_inputs?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:t[5]||(t[5]=(...e)=>l.checkFoldInputs&&l.checkFoldInputs(...e))},null,2),ze]),l.isFold_inputs?((0,n.uX)(),(0,n.CE)("div",Ze,[(0,n.Lk)("table",null,[We,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.nodeData.inputs,((e,l)=>((0,n.uX)(),(0,n.CE)("tr",{key:l},[(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":l=>e.varname=l},null,8,$e),[[o.Jo,e.varname]])]),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":l=>e.txt=l},null,8,Ge),[[o.Jo,e.txt]])])])))),128))])])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",Ye,[(0,n.Lk)("div",el,[(0,n.Lk)("span",{class:(0,s.C4)(["Icon fold",[l.isFold_outputs?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:t[6]||(t[6]=(...e)=>l.checkFoldOutputs&&l.checkFoldOutputs(...e))},null,2),ll]),l.isFold_outputs?((0,n.uX)(),(0,n.CE)("div",tl,[(0,n.Lk)("table",null,[ol,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.nodeData.output,((e,l)=>((0,n.uX)(),(0,n.CE)("tr",{key:l},[(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":l=>e.varname=l},null,8,nl),[[o.Jo,e.varname]])]),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":l=>e.txt=l},null,8,al),[[o.Jo,e.txt]])])])))),128))])])])):(0,n.Q3)("",!0)])])):(0,n.Q3)("",!0)],2)],64))}});const dl=il;var ul=dl;const cl={class:"Title"},rl=(0,n.Lk)("span",{class:"Icon ticon icon-start"},null,-1),pl=(0,n.Lk)("span",null,"开始",-1),kl={key:0,class:"Content"},hl=(0,n.Lk)("div",{class:"Description"},"工作流的起始节点，用于设定启动工作流需要的信息",-1),Ll={class:"Inputs Content"},vl={class:"Title"},ml=(0,n.Lk)("span",null,"输入",-1),Fl={key:0},gl=(0,n.Lk)("thead",null,[(0,n.Lk)("th",null,"变量名"),(0,n.Lk)("th",null,"描述")],-1),bl=["onUpdate:modelValue"],Cl=["onUpdate:modelValue"],yl={class:"Prompt Content"},fl={class:"Title"},Nl=(0,n.Lk)("span",null,"提示词",-1),_l={key:0},Il=["placeholder"],El={name:"StartNode",props:{id:String,isSelected:Boolean,data:Object},data(){return{label:this.data.label,nodeData:this.data,isFold:!0,isFold_inputs:!0,isFold_prompt:!0}},methods:{saveNode(){this.$emit("saveNode",{id:this.id,data:{...this.nodeData,label:this.label}})},saveLabel(){this.saveNode()},checkFold(){this.isFold=!this.isFold},checkFoldInputs(){this.isFold_inputs=!this.isFold_inputs},checkFoldPrompt(){this.isFold_prompt=!this.isFold_prompt}}};var wl=Object.assign(El,{setup(e){return(l,t)=>((0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)((0,a.R1)(i.h7),{class:"Handle",type:"source",position:(0,a.R1)(i.yX).Right,style:{}},null,8,["position"]),(0,n.Lk)("div",{class:(0,s.C4)(["NodeBox StartNode iconfont",[e.isSelected?"Selected":"",""]])},[(0,n.Lk)("div",cl,[(0,n.Lk)("span",{class:(0,s.C4)(["Icon fold",[l.isFold?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:t[0]||(t[0]=(...e)=>l.checkFold&&l.checkFold(...e))},null,2),rl,pl]),l.isFold?((0,n.uX)(),(0,n.CE)("div",kl,[hl,(0,n.Lk)("div",Ll,[(0,n.Lk)("div",vl,[(0,n.Lk)("span",{class:(0,s.C4)(["Icon fold",[l.isFold_inputs?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:t[1]||(t[1]=(...e)=>l.checkFoldInputs&&l.checkFoldInputs(...e))},null,2),ml]),l.isFold_inputs?((0,n.uX)(),(0,n.CE)("div",Fl,[(0,n.Lk)("table",null,[gl,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.nodeData.inputs,((e,l)=>((0,n.uX)(),(0,n.CE)("tr",{key:l},[(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":l=>e.varname=l},null,8,bl),[[o.Jo,e.varname]])]),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":l=>e.txt=l},null,8,Cl),[[o.Jo,e.txt]])])])))),128))])])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",yl,[(0,n.Lk)("div",fl,[(0,n.Lk)("span",{class:(0,s.C4)(["Icon fold",[l.isFold_prompt?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:t[2]||(t[2]=(...e)=>l.checkFoldPrompt&&l.checkFoldPrompt(...e))},null,2),Nl]),l.isFold_prompt?((0,n.uX)(),(0,n.CE)("div",_l,[(0,n.bo)((0,n.Lk)("textarea",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.nodeData.prompt=e),placeholder:["请输入提示词："+l.nodeData.inputs.map((e=>"{{"+e.varname+"}}")).join(",")]},null,8,Il),[[o.Jo,l.nodeData.prompt]])])):(0,n.Q3)("",!0)])])):(0,n.Q3)("",!0)],2)],64))}});const Xl=wl;var xl=Xl;const Dl={class:"Title"},Sl=(0,n.Lk)("span",{class:"Icon ticon icon-end"},null,-1),jl=(0,n.Lk)("span",null,"结束",-1),Vl={key:0,class:"Content"},Ml=(0,n.Lk)("div",{class:"Description"},"工作流的结束节点，用于返回工作流运行后的结果信息",-1),Ol={class:"Outputs Content"},Bl={class:"Title"},ql=(0,n.Lk)("span",null,"输出",-1),Tl={key:0},Ul=(0,n.Lk)("thead",null,[(0,n.Lk)("th",null,"变量名"),(0,n.Lk)("th",null,"描述")],-1),Ql=["onUpdate:modelValue"],Kl=["onUpdate:modelValue"],Rl={class:"Prompt Content"},Pl={class:"Title"},Al=(0,n.Lk)("span",null,"提示词（将输出变量与提示词整理，并让AI重新生成返回结果）",-1),Hl={key:0},Jl=["placeholder"],zl={name:"EndNode",props:{id:String,isSelected:Boolean,data:Object},data(){return{label:this.data.label,nodeData:this.data,isFold:!0,isFold_outputs:!0,isFold_prompt:!0}},methods:{saveNode(){this.$emit("saveNode",{id:this.id,data:{...this.nodeData,label:this.label}})},saveLabel(){this.saveNode()},checkFold(){this.isFold=!this.isFold},checkFoldOutputs(){this.isFold_outputs=!this.isFold_outputs},checkFoldPrompt(){this.isFold_prompt=!this.isFold_prompt}}};var Zl=Object.assign(zl,{setup(e){return(l,t)=>((0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)((0,a.R1)(i.h7),{class:"Handle",type:"target",position:(0,a.R1)(i.yX).Left,style:{}},null,8,["position"]),(0,n.Lk)("div",{class:(0,s.C4)(["NodeBox EndNode iconfont",[e.isSelected?"Selected":"",""]])},[(0,n.Lk)("div",Dl,[(0,n.Lk)("span",{class:(0,s.C4)(["Icon fold",[l.isFold?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:t[0]||(t[0]=(...e)=>l.checkFold&&l.checkFold(...e))},null,2),Sl,jl]),l.isFold?((0,n.uX)(),(0,n.CE)("div",Vl,[Ml,(0,n.Lk)("div",Ol,[(0,n.Lk)("div",Bl,[(0,n.Lk)("span",{class:(0,s.C4)(["Icon fold",[l.isFold_outputs?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:t[1]||(t[1]=(...e)=>l.checkFoldOutputs&&l.checkFoldOutputs(...e))},null,2),ql]),l.isFold_outputs?((0,n.uX)(),(0,n.CE)("div",Tl,[(0,n.Lk)("table",null,[Ul,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.nodeData.output,((e,l)=>((0,n.uX)(),(0,n.CE)("tr",{key:l},[(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":l=>e.varname=l},null,8,Ql),[[o.Jo,e.varname]])]),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":l=>e.txt=l},null,8,Kl),[[o.Jo,e.txt]])])])))),128))])])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",Rl,[(0,n.Lk)("div",Pl,[(0,n.Lk)("span",{class:(0,s.C4)(["Icon fold",[l.isFold_prompt?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:t[2]||(t[2]=(...e)=>l.checkFoldPrompt&&l.checkFoldPrompt(...e))},null,2),Al]),l.isFold_prompt?((0,n.uX)(),(0,n.CE)("div",Hl,[(0,n.bo)((0,n.Lk)("textarea",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.nodeData.prompt=e),placeholder:["请输入提示词："+l.nodeData.output.map((e=>"{{"+e.varname+"}}")).join(",")]},null,8,Jl),[[o.Jo,l.nodeData.prompt]])])):(0,n.Q3)("",!0)])])):(0,n.Q3)("",!0)],2)],64))}});const Wl=Zl;var $l=Wl;const Gl={class:"Title"},Yl=(0,n.Lk)("span",{class:"Icon ticon icon-selector1"},null,-1),et=(0,n.Lk)("span",null,"选择器",-1),lt={key:0,class:"Content"},tt=(0,n.Lk)("div",{class:"Description"},"可以通过选择器的定义，链接多个下游执行节点",-1),ot={class:"Inputs Content"},nt={class:"Title"},at=(0,n.Lk)("span",null,"输入",-1),st={key:0},it=(0,n.Lk)("thead",null,[(0,n.Lk)("th",null,"变量名"),(0,n.Lk)("th",null,"描述")],-1),dt=["onUpdate:modelValue"],ut=["onUpdate:modelValue"],ct={class:"Selector Content"},rt={class:"Title"},pt=(0,n.Lk)("span",null,"条件判断",-1),kt={key:0},ht=(0,n.Lk)("thead",null,[(0,n.Lk)("th",null,"变量名"),(0,n.Lk)("th",null,"判断条件"),(0,n.Lk)("th",null,"比较值"),(0,n.Lk)("th",null,"删除")],-1),Lt=["onUpdate:modelValue"],vt=["value"],mt=["onUpdate:modelValue"],Ft=["value"],gt=["onUpdate:modelValue"],bt=["onClick"],Ct=(0,n.Lk)("span",{class:"Icon ticon icon-add"},null,-1),yt=(0,n.Lk)("span",null,"增加条件",-1),ft=[Ct,yt],Nt={name:"SelectorNode",props:{id:String,isSelected:Boolean,data:Object},created(){},data(){return{label:this.data.label,nodeData:this.data,isFold:!0,isFold_inputs:!0,isFold_selector:!0,selectorList:this.data.selector?this.data.selector.map(((e,l)=>(e.top=25*l+240,e.top_str="top:"+e.top+"px",e))):[],comparison:[{name:"等于",data:"=",text:"等于"},{name:"不等于",data:"!=",text:"不等于"},{name:"大于",data:">",text:"大于"},{name:"小于",data:"<",text:"小于"},{name:"包含",data:"~=",text:"包含"},{name:"不包含",data:"!~=",text:"不包含"}]}},methods:{resetHandleTop(){var e=185;this.isFold_inputs&&(e+=55),this.isFold_selector&&this.isFold?(this.isFold||this.isFold_inputs)&&(this.selectorList=this.selectorList.map(((l,t)=>(l.top=25*t+e,l.top_str="top:"+l.top+"px",l)))):this.selectorList=this.selectorList.map((e=>(e.top=0,e.top_str="",e)))},saveNode(){this.$emit("saveNode",{id:this.id,data:{...this.nodeData,label:this.label,selector:this.selectorList}})},saveLabel(){this.saveNode()},checkFold(){this.isFold=!this.isFold,this.resetHandleTop()},checkFoldInputs(){this.isFold_inputs=!this.isFold_inputs,this.resetHandleTop()},checkFoldSelector(){this.isFold_selector=!this.isFold_selector,this.resetHandleTop()},onAdd(){var e=this.selectorList.length+1,l=25*this.selectorList.length+240;this.selectorList.push({id:"Handle_"+e,inputs:"2",comparison:"",value:"",top:l,top_str:"top:"+l+"px"}),this.saveNode()},onDel(e){this.selectorList=this.selectorList.filter((l=>l.id!==e.id)),this.saveNode()}}};var _t=Object.assign(Nt,{setup(e){return(l,t)=>((0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)((0,a.R1)(i.h7),{id:"target_1",class:"Handle",type:"target",position:(0,a.R1)(i.yX).Left,style:{}},null,8,["position"]),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.selectorList,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e.id},[(0,n.bF)((0,a.R1)(i.h7),{id:e.id,class:"Handle",type:"source",position:(0,a.R1)(i.yX).Right,style:(0,s.Tr)(e.top_str)},null,8,["id","position","style"])])))),128)),(0,n.Lk)("div",{class:(0,s.C4)(["NodeBox SelectorNode iconfont",[e.isSelected?"Selected":"",""]])},[(0,n.Lk)("div",Gl,[(0,n.Lk)("span",{class:(0,s.C4)(["Icon fold",[l.isFold?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:t[0]||(t[0]=(...e)=>l.checkFold&&l.checkFold(...e))},null,2),Yl,et,(0,n.bo)((0,n.Lk)("input",{class:"label","onUpdate:modelValue":t[1]||(t[1]=e=>l.label=e),value:"{{label}}",placeholder:"备注",onBlur:t[2]||(t[2]=(...e)=>l.saveLabel&&l.saveLabel(...e))},null,544),[[o.Jo,l.label]])]),l.isFold?((0,n.uX)(),(0,n.CE)("div",lt,[tt,(0,n.Lk)("div",ot,[(0,n.Lk)("div",nt,[(0,n.Lk)("span",{class:(0,s.C4)(["Icon fold",[l.isFold_inputs?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:t[3]||(t[3]=(...e)=>l.checkFoldInputs&&l.checkFoldInputs(...e))},null,2),at]),l.isFold_inputs?((0,n.uX)(),(0,n.CE)("div",st,[(0,n.Lk)("table",null,[it,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.nodeData.inputs,((e,l)=>((0,n.uX)(),(0,n.CE)("tr",{key:l},[(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":l=>e.varname=l},null,8,dt),[[o.Jo,e.varname]])]),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":l=>e.txt=l},null,8,ut),[[o.Jo,e.txt]])])])))),128))])])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",ct,[(0,n.Lk)("div",rt,[(0,n.Lk)("span",{class:(0,s.C4)(["Icon fold",[l.isFold_selector?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:t[4]||(t[4]=(...e)=>l.checkFoldSelector&&l.checkFoldSelector(...e))},null,2),pt]),l.isFold_selector?((0,n.uX)(),(0,n.CE)("div",kt,[(0,n.Lk)("table",null,[ht,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.selectorList,(e=>((0,n.uX)(),(0,n.CE)("tr",{key:e.id},[(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":l=>e.inputs=l},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.nodeData.inputs,((e,l)=>((0,n.uX)(),(0,n.CE)("option",{key:l,value:e.varname},(0,s.v_)(e.varname),9,vt)))),128))],8,Lt),[[o.u1,e.inputs]])]),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":l=>e.comparison=l},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.comparison,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e.name,value:e.data},(0,s.v_)(e.text),9,Ft)))),128))],8,mt),[[o.u1,e.comparison]])]),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{placeholder:"留空代表字符串空","onUpdate:modelValue":l=>e.value=l},null,8,gt),[[o.Jo,e.value]])]),(0,n.Lk)("td",null,[(0,n.Lk)("span",{class:"Icon ticon icon-del del",onClick:t=>l.onDel(e)},null,8,bt)])])))),128))]),(0,n.Lk)("footer",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("td",{colspan:"4",class:"add",onClick:t[5]||(t[5]=(...e)=>l.onAdd&&l.onAdd(...e))},ft)])])])])):(0,n.Q3)("",!0)])])):(0,n.Q3)("",!0)],2)],64))}});const It=_t;var Et=It,wt=t(8074);const Xt={class:"Title"},xt=(0,n.Lk)("span",{class:"Icon ticon icon-KnowledgeBase"},null,-1),Dt=(0,n.Lk)("span",null,"知识库",-1),St={key:0,class:"Content"},jt=(0,n.Lk)("div",{class:"Description"},"根据输入的文本，调用知识库，获取知识库数据",-1),Vt={class:"Inputs Content"},Mt={class:"Title"},Ot=(0,n.Lk)("span",null,"输入",-1),Bt={key:0},qt=(0,n.Lk)("thead",null,[(0,n.Lk)("th",null,"变量名"),(0,n.Lk)("th",null,"描述")],-1),Tt=["onUpdate:modelValue"],Ut=["onUpdate:modelValue"],Qt={class:"KnowledgeBase Content"},Kt={class:"Title"},Rt=(0,n.Lk)("span",null,"知识库",-1),Pt={key:0},At={class:"Outputs Content"},Ht={class:"Title"},Jt=(0,n.Lk)("span",null,"输出",-1),zt={key:0},Zt=(0,n.Lk)("thead",null,[(0,n.Lk)("th",null,"变量名"),(0,n.Lk)("th",null,"描述")],-1),Wt=["onUpdate:modelValue"],$t=["onUpdate:modelValue"],Gt={name:"KnowledgeBaseNode",props:{id:String,isSelected:Boolean,data:Object,knowledgeBase:Object},components:{Multiselect:wt.Ay},data(){return{label:this.data.label,nodeData:this.data,KnowledgeBaseList:this.knowledgeBase,isFold:!0,isFold_inputs:!0,isFold_outputs:!0,isFold_KnowledgeBase:!0}},methods:{saveNode(){this.$emit("saveNode",{id:this.id,data:{...this.nodeData,label:this.label}})},saveLabel(){this.saveNode()},checkFold(){this.isFold=!this.isFold},checkFoldInputs(){this.isFold_inputs=!this.isFold_inputs},checkFoldOutputs(){this.isFold_outputs=!this.isFold_outputs},checkFoldKnowledgeBase(){console.log(this.KnowledgeBaseList),this.isFold_KnowledgeBase=!this.isFold_KnowledgeBase}}};var Yt=Object.assign(Gt,{setup(e){return(l,t)=>((0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)((0,a.R1)(i.h7),{class:"Handle",type:"target",position:(0,a.R1)(i.yX).Left,style:{}},null,8,["position"]),(0,n.bF)((0,a.R1)(i.h7),{class:"Handle",type:"source",position:(0,a.R1)(i.yX).Right,style:{}},null,8,["position"]),(0,n.Lk)("div",{class:(0,s.C4)(["NodeBox KnowledgeBaseNode iconfont",[e.isSelected?"Selected":"",""]])},[(0,n.Lk)("div",Xt,[(0,n.Lk)("span",{class:(0,s.C4)(["Icon fold",[l.isFold?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:t[0]||(t[0]=(...e)=>l.checkFold&&l.checkFold(...e))},null,2),xt,Dt,(0,n.bo)((0,n.Lk)("input",{class:"label","onUpdate:modelValue":t[1]||(t[1]=e=>l.label=e),value:"{{label}}",placeholder:"备注",onBlur:t[2]||(t[2]=(...e)=>l.saveLabel&&l.saveLabel(...e))},null,544),[[o.Jo,l.label]])]),l.isFold?((0,n.uX)(),(0,n.CE)("div",St,[jt,(0,n.Lk)("div",Vt,[(0,n.Lk)("div",Mt,[(0,n.Lk)("span",{class:(0,s.C4)(["Icon fold",[l.isFold_inputs?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:t[3]||(t[3]=(...e)=>l.checkFoldInputs&&l.checkFoldInputs(...e))},null,2),Ot]),l.isFold_inputs?((0,n.uX)(),(0,n.CE)("div",Bt,[(0,n.Lk)("table",null,[qt,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.nodeData.inputs,((e,l)=>((0,n.uX)(),(0,n.CE)("tr",{key:l},[(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":l=>e.varname=l},null,8,Tt),[[o.Jo,e.varname]])]),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":l=>e.txt=l},null,8,Ut),[[o.Jo,e.txt]])])])))),128))])])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",Qt,[(0,n.Lk)("div",Kt,[(0,n.Lk)("span",{class:(0,s.C4)(["Icon fold",[l.isFold_KnowledgeBase?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:t[4]||(t[4]=(...e)=>l.checkFoldKnowledgeBase&&l.checkFoldKnowledgeBase(...e))},null,2),Rt]),l.isFold_KnowledgeBase?((0,n.uX)(),(0,n.CE)("div",Pt,[(0,n.bF)((0,a.R1)(wt.Ay),{modelValue:l.nodeData.knowledgeBase,"onUpdate:modelValue":t[5]||(t[5]=e=>l.nodeData.knowledgeBase=e),placeholder:"请选择知识库",multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,label:"Name","track-by":"Name",taggable:"true",options:l.KnowledgeBaseList},null,8,["modelValue","options"])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",At,[(0,n.Lk)("div",Ht,[(0,n.Lk)("span",{class:(0,s.C4)(["Icon fold",[l.isFold_outputs?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:t[6]||(t[6]=(...e)=>l.checkFoldOutputs&&l.checkFoldOutputs(...e))},null,2),Jt]),l.isFold_outputs?((0,n.uX)(),(0,n.CE)("div",zt,[(0,n.Lk)("table",null,[Zt,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.nodeData.output,((e,l)=>((0,n.uX)(),(0,n.CE)("tr",{key:l},[(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":l=>e.varname=l},null,8,Wt),[[o.Jo,e.varname]])]),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":l=>e.txt=l},null,8,$t),[[o.Jo,e.txt]])])])))),128))])])])):(0,n.Q3)("",!0)])])):(0,n.Q3)("",!0)],2)],64))}});const eo=Yt;var lo=eo;const to=["cx","cy"],oo=["d"],no=["transform","d"],ao={inheritAttrs:!1};var so=Object.assign(ao,{__name:"CustomEdge",props:{id:{type:String,required:!0},sourceX:{type:Number,required:!0},sourceY:{type:Number,required:!0},targetX:{type:Number,required:!0},targetY:{type:Number,required:!0},sourcePosition:{type:String,required:!0},targetPosition:{type:String,required:!0},data:{type:Object,required:!1},markerEnd:{type:String,required:!1},style:{type:Object,required:!1}},setup(e){const l=e,t=(0,n.EW)((()=>(0,i.Fp)(l)));return(o,d)=>((0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)((0,a.R1)(i.tE),{id:e.id,style:(0,s.Tr)(e.style),path:t.value[0],"marker-end":e.markerEnd,label:e.data.text,"label-x":t.value[1],"label-y":t.value[2],"label-style":{fill:"white"},"label-show-bg":!0,"label-bg-style":{fill:"red"},"label-bg-padding":[2,4],"label-bg-border-radius":2},null,8,["id","style","path","marker-end","label","label-x","label-y"]),(0,n.Lk)("g",null,[(0,n.Lk)("circle",{cx:l.sourceX,cy:l.sourceY,r:"4",fill:"#29a3ff"},null,8,to),(0,n.Lk)("path",{d:t.value,fill:"none",stroke:"#29a3ff","stroke-width":"2"},null,8,oo),(0,n.Lk)("path",{transform:o.transform,d:`M ${e.targetX} ${e.targetY+2} L ${e.targetX-5} ${e.targetY-10} L ${e.targetX+5} ${e.targetY-10} Z`,fill:"#29a3ff",stroke:"none"},null,8,no)])],64))}});const io=so;var uo=io,co=null;const ro={name:"WorkFlow",props:{workflow_data:{title:"智能助理"}},components:{VueFlow:i.nO,Background:d.V,MiniMap:c.of,ToolBox:W,Controls:u.H,ToolIcon:T,ControlButton:u.a,WorkFlowData:te,LargeModelNode:Me,PluginsNode:ul,StartNode:xl,EndNode:$l,SelectorNode:Et,CustomEdge:uo},created(){let e=this;co=e},data(){return{ShowNodeBox:!1,workflow:{title:"智能助理"},plugins:(0,a.KR)(r),largeModel:(0,a.KR)(p),nodes:(0,a.KR)(h),edges:(0,a.KR)(L),dark:(0,a.KR)(!1),selectedNode:null,selectEdge:null,connectionLineStyle:{stroke:"#ddd",strokeWidth:2}}},methods:{onShowNodeBox(){this.ShowNodeBox=!this.ShowNodeBox},toggleDarkMode(){this.dark=!this.dark},addNode(e){console.log(e),this.nodes.push(e)},saveNode(e){this.nodes=this.nodes.map((l=>(l.id==e.id&&(l.data=e.data),l)))},nodeClick(e){this.selectedNode=e,this.selectEdge=null},edgeClick(e){this.selectedNode=null,this.selectEdge=e}}};var po=Object.assign(ro,{setup(e){const{onInit:l,onNodeDragStop:t,onConnect:o,addEdges:p,setViewport:h,toObject:L,applyNodeChanges:v,applyEdgeChanges:m}=(0,i.Id)();l((e=>{e.fitView()})),t((({event:e,nodes:l,node:t})=>{co.nodes=L().nodes})),o((e=>{p(e)}));const F=async e=>{const l=[];for(const o of e)if("remove"===o.type){var t=co.nodes.filter((e=>e.id===o.id));if(t.length>0){if("Start"===t[0].type){alert("开始节点不能删除");continue}if("End"===t[0].type){alert("结束节点不能删除");continue}l.push(o)}}else l.push(o);v(l)},g=async e=>{const l=[];for(const t of e)if("remove"===t.type){if(co.selectedNode)continue;l.push(t)}else l.push(t);m(l)};function b(){console.log(L())}function C(){h({x:0,y:0,zoom:1})}return(l,t)=>{const o=(0,n.g2)("Panel");return(0,n.uX)(),(0,n.Wv)((0,a.R1)(i.nO),{nodes:l.nodes,edges:l.edges,class:(0,s.C4)([{dark:l.dark},"basic-flow"]),"default-viewport":{zoom:1.5},"min-zoom":.2,"max-zoom":4,"apply-default":!1,"fit-view-on-init":"",onNodesChange:F,onEdgesChange:g,onEdgeClick:l.edgeClick,onNodeClick:l.nodeClick,"connection-line-style":l.connectionLineStyle},{"edge-custom":(0,n.k6)((e=>[(0,n.bF)(uo,{id:e.id,"source-x":e.sourceX,"source-y":e.sourceY,"target-x":e.targetX,"target-y":e.targetY,"source-position":e.sourcePosition,"target-position":e.targetPosition,data:e.data,"marker-end":e.markerEnd,style:(0,s.Tr)(e.style)},null,8,["id","source-x","source-y","target-x","target-y","source-position","target-position","data","marker-end","style"])])),"node-Start":(0,n.k6)((e=>[(0,n.bF)(xl,{id:e.id,data:e.data,isSelected:e.selected,onSaveNode:l.saveNode},null,8,["id","data","isSelected","onSaveNode"])])),"node-End":(0,n.k6)((e=>[(0,n.bF)($l,{id:e.id,data:e.data,isSelected:e.selected,onSaveNode:l.saveNode},null,8,["id","data","isSelected","onSaveNode"])])),"node-LargeModel":(0,n.k6)((e=>[(0,n.bF)(Me,{id:e.id,data:e.data,isSelected:e.selected,largeModel:l.largeModel,onSaveNode:l.saveNode},null,8,["id","data","isSelected","largeModel","onSaveNode"])])),"node-KnowledgeBase":(0,n.k6)((e=>[(0,n.bF)(lo,{id:e.id,data:e.data,isSelected:e.selected,knowledgeBase:(0,a.R1)(k),onSaveNode:l.saveNode},null,8,["id","data","isSelected","knowledgeBase","onSaveNode"])])),"node-Plugins":(0,n.k6)((e=>[(0,n.bF)(ul,{id:e.id,data:e.data,isSelected:e.selected,plugins:(0,a.R1)(r),onSaveNode:l.saveNode},null,8,["id","data","isSelected","plugins","onSaveNode"])])),"node-Selector":(0,n.k6)((e=>[(0,n.bF)(Et,{id:e.id,data:e.data,isSelected:e.selected,onSaveNode:l.saveNode},null,8,["id","data","isSelected","onSaveNode"])])),default:(0,n.k6)((()=>[(0,n.bF)((0,a.R1)(d.V),{"pattern-color":"#f0f0f0",gap:15}),(0,n.bF)(te,{class:"vue-flow__panel top left",title:e.workflow_data.title},null,8,["title"]),(0,n.bF)((0,a.R1)(c.of),{position:"bottom-left",class:"MiniMap"}),(0,n.bF)((0,a.R1)(u.H),{position:"bottom-left"},{default:(0,n.k6)((()=>[(0,n.bF)((0,a.R1)(u.a),{title:"Reset Transform",onClick:C},{default:(0,n.k6)((()=>[(0,n.bF)(T,{name:"reset"})])),_:1}),(0,n.bF)((0,a.R1)(u.a),{title:"Toggle Dark Mode",onClick:l.toggleDarkMode},{default:(0,n.k6)((()=>[l.dark?((0,n.uX)(),(0,n.Wv)(T,{key:0,name:"sun"})):((0,n.uX)(),(0,n.Wv)(T,{key:1,name:"moon"}))])),_:1},8,["onClick"]),(0,n.bF)((0,a.R1)(u.a),{title:"Log `toObject`",onClick:b},{default:(0,n.k6)((()=>[(0,n.bF)(T,{name:"log"})])),_:1})])),_:1}),(0,n.bF)(o,{class:"ToolBox vue-flow__panel top left vue-flow__controls"},{default:(0,n.k6)((()=>[(0,n.bF)(W,{"is-visible":l.ShowNodeBox,onAddNode:l.addNode},null,8,["is-visible","onAddNode"]),(0,n.bF)((0,a.R1)(u.a),{title:"Reset Transform",onClick:l.onShowNodeBox},{default:(0,n.k6)((()=>[l.ShowNodeBox?((0,n.uX)(),(0,n.Wv)(T,{key:1,name:"zoomout"})):((0,n.uX)(),(0,n.Wv)(T,{key:0,name:"zoomin"}))])),_:1},8,["onClick"])])),_:1})])),_:1},8,["nodes","edges","class","onEdgeClick","onNodeClick","connection-line-style"])}}});const ko=po;var ho=ko;const Lo={name:"App",components:{WorkFlow:ho},data(){return{workflow_data:{title:"智能助手"}}}};var vo=Object.assign(Lo,{setup(e){return(e,l)=>((0,n.uX)(),(0,n.Wv)(ho,{workflow_data:e.workflow_data},null,8,["workflow_data"]))}});const mo=vo;var Fo=mo;(0,o.Ef)(Fo).mount("#app")}},l={};function t(o){var n=l[o];if(void 0!==n)return n.exports;var a=l[o]={exports:{}};return e[o].call(a.exports,a,a.exports,t),a.exports}t.m=e,function(){var e=[];t.O=function(l,o,n,a){if(!o){var s=1/0;for(c=0;c<e.length;c++){o=e[c][0],n=e[c][1],a=e[c][2];for(var i=!0,d=0;d<o.length;d++)(!1&a||s>=a)&&Object.keys(t.O).every((function(e){return t.O[e](o[d])}))?o.splice(d--,1):(i=!1,a<s&&(s=a));if(i){e.splice(c--,1);var u=n();void 0!==u&&(l=u)}}return l}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[o,n,a]}}(),function(){t.n=function(e){var l=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(l,{a:l}),l}}(),function(){t.d=function(e,l){for(var o in l)t.o(l,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:l[o]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,l){return Object.prototype.hasOwnProperty.call(e,l)}}(),function(){var e={524:0};t.O.j=function(l){return 0===e[l]};var l=function(l,o){var n,a,s=o[0],i=o[1],d=o[2],u=0;if(s.some((function(l){return 0!==e[l]}))){for(n in i)t.o(i,n)&&(t.m[n]=i[n]);if(d)var c=d(t)}for(l&&l(o);u<s.length;u++)a=s[u],t.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return t.O(c)},o=self["webpackChunkworkflow"]=self["webpackChunkworkflow"]||[];o.forEach(l.bind(null,0)),o.push=l.bind(null,o.push.bind(o))}();var o=t.O(void 0,[504],(function(){return t(4520)}));o=t.O(o)})();
//# sourceMappingURL=app.3109c7a2.js.map