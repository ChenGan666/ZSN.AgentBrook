(function(){"use strict";var e={4049:function(e,l,o){var t=o(5130),n=(o(4603),o(7566),o(8721),o(6768)),a=o(4232);function s(e,l,o,t,s,i){const d=(0,n.g2)("Background"),u=(0,n.g2)("WorkFlowData"),c=(0,n.g2)("MiniMap"),p=(0,n.g2)("ToolIcon"),r=(0,n.g2)("ControlButton"),k=(0,n.g2)("Controls"),h=(0,n.g2)("WorkFlowInfo"),m=(0,n.g2)("Panel"),g=(0,n.g2)("ToolBox"),F=(0,n.g2)("CustomEdge"),L=(0,n.g2)("StartNode"),v=(0,n.g2)("EndNode"),b=(0,n.g2)("LargeModelNode"),C=(0,n.g2)("KnowledgeBaseNode"),f=(0,n.g2)("PluginsNode"),_=(0,n.g2)("SelectorNode"),y=(0,n.g2)("TimeTrigger"),w=(0,n.g2)("MainAINode"),D=(0,n.g2)("AgentNode"),I=(0,n.g2)("ReporterNode"),N=(0,n.g2)("VueFlow");return(0,n.uX)(),(0,n.Wv)(N,{ref:"vueFlow",nodes:s.nodes,edges:s.edges,class:(0,a.C4)([{dark:s.dark},"basic-flow"]),"default-viewport":{zoom:1.5},"min-zoom":.2,"max-zoom":4,"apply-default":!1,"fit-view-on-init":"",onNodesChange:e.onNodesChange,onEdgesChange:e.onEdgesChange,onEdgeClick:i.edgeClick,onNodeClick:i.nodeClick,"connection-line-style":s.connectionLineStyle},{"edge-custom":(0,n.k6)((e=>[(0,n.bF)(F,{id:e.id,"source-x":e.sourceX,"source-y":e.sourceY,"target-x":e.targetX,"target-y":e.targetY,"source-position":e.sourcePosition,"target-position":e.targetPosition,data:e.data,"marker-end":e.markerEnd,style:(0,a.Tr)(e.style)},null,8,["id","source-x","source-y","target-x","target-y","source-position","target-position","data","marker-end","style"])])),"node-Start":(0,n.k6)((e=>[(0,n.bF)(L,{id:e.id,data:e.data,isSelected:e.selected,onSaveNode:i.saveNode},null,8,["id","data","isSelected","onSaveNode"])])),"node-End":(0,n.k6)((e=>[(0,n.bF)(v,{id:e.id,data:e.data,isSelected:e.selected,onSaveNode:i.saveNode},null,8,["id","data","isSelected","onSaveNode"])])),"node-LargeModel":(0,n.k6)((e=>[(0,n.bF)(b,{id:e.id,data:e.data,isSelected:e.selected,largeModel:s.largeModelList,plugins:s.pluginsList,onSaveNode:i.saveNode},null,8,["id","data","isSelected","largeModel","plugins","onSaveNode"])])),"node-KnowledgeBase":(0,n.k6)((e=>[(0,n.bF)(C,{id:e.id,data:e.data,isSelected:e.selected,knowledgeBase:s.knowledgeBaseList,onSaveNode:i.saveNode},null,8,["id","data","isSelected","knowledgeBase","onSaveNode"])])),"node-Plugins":(0,n.k6)((e=>[(0,n.bF)(f,{id:e.id,data:e.data,isSelected:e.selected,plugins:s.pluginsList,onSaveNode:i.saveNode},null,8,["id","data","isSelected","plugins","onSaveNode"])])),"node-Selector":(0,n.k6)((e=>[(0,n.bF)(_,{id:e.id,data:e.data,isSelected:e.selected,onSaveNode:i.saveNode},null,8,["id","data","isSelected","onSaveNode"])])),"node-TimeTrigger":(0,n.k6)((e=>[(0,n.bF)(y,{id:e.id,data:e.data,isSelected:e.selected,onSaveNode:i.saveNode},null,8,["id","data","isSelected","onSaveNode"])])),"node-MainAI":(0,n.k6)((e=>[(0,n.bF)(w,{id:e.id,data:e.data,isSelected:e.selected,largeModel:s.largeModelList,plugins:s.pluginsList,onSaveNode:i.saveNode},null,8,["id","data","isSelected","largeModel","plugins","onSaveNode"])])),"node-Agent":(0,n.k6)((e=>[(0,n.bF)(D,{id:e.id,data:e.data,isSelected:e.selected,agents:s.agentList,onSaveNode:i.saveNode},null,8,["id","data","isSelected","agents","onSaveNode"])])),"node-Reporter":(0,n.k6)((e=>[(0,n.bF)(I,{id:e.id,data:e.data,isSelected:e.selected,largeModel:s.largeModelList,onSaveNode:i.saveNode},null,8,["id","data","isSelected","largeModel","onSaveNode"])])),default:(0,n.k6)((()=>[(0,n.bF)(d,{"pattern-color":"#f0f0f0",gap:15}),(0,n.bF)(u,{class:"vue-flow__panel top left"}),(0,n.bF)(c,{position:"bottom-left",class:"MiniMap"}),(0,n.bF)(k,{position:"bottom-left"},{default:(0,n.k6)((()=>[(0,n.bF)(r,{title:"Reset Transform",onClick:i.resetTransform},{default:(0,n.k6)((()=>[(0,n.bF)(p,{name:"reset"})])),_:1},8,["onClick"]),(0,n.bF)(r,{title:"Toggle Dark Mode",onClick:i.toggleDarkMode},{default:(0,n.k6)((()=>[s.dark?((0,n.uX)(),(0,n.Wv)(p,{key:0,name:"sun"})):((0,n.uX)(),(0,n.Wv)(p,{key:1,name:"moon"}))])),_:1},8,["onClick"]),(0,n.bF)(r,{title:"Log `toObject`",onClick:i.logToObject},{default:(0,n.k6)((()=>[(0,n.bF)(p,{name:"log"})])),_:1},8,["onClick"])])),_:1}),(0,n.bF)(m,{class:"WorkFlowInfo vue-flow__panel top left vue-flow__controls"},{default:(0,n.k6)((()=>[(0,n.bF)(h,{info:s.info,"onUpdate:info":l[0]||(l[0]=e=>s.info=e),onSave:i.save},null,8,["info","onSave"])])),_:1}),(0,n.bF)(m,{class:"ToolBox vue-flow__panel top left vue-flow__controls"},{default:(0,n.k6)((()=>[(0,n.bF)(g,{"is-visible":s.ShowNodeBox,"workflow-i-d":o.workflow_data.WorkFlowID,"main-i-d":o.workflow_data.MainID,nodeClass:o.workflow_data.MainType,onAddNode:i.addNode},null,8,["is-visible","workflow-i-d","main-i-d","nodeClass","onAddNode"]),(0,n.bF)(r,{onClick:i.onShowNodeBox},{default:(0,n.k6)((()=>[s.ShowNodeBox?((0,n.uX)(),(0,n.Wv)(p,{key:1,name:"zoomout"})):((0,n.uX)(),(0,n.Wv)(p,{key:0,name:"zoomin"}))])),_:1},8,["onClick"])])),_:1})])),_:1},8,["nodes","edges","class","onNodesChange","onEdgesChange","onEdgeClick","onNodeClick","connection-line-style"])}o(4114);var i=o(144),d=o(6805),u=o(2647),c=o(4671),p=o(4039),r=o(4373);const k=r.A.create({baseURL:"http://192.168.0.28:5002",headers:{"Content-Type":"application/json"}});class h{static get(e){return k.get(e).then((e=>e.data))}static post(e,l,o){return k.post(e,l,o).then((e=>e.data))}static put(e,l){return k.put(e,l).then((e=>e.data))}static delete(e){return k.delete(e).then((()=>!0))}static getBaseConfig(){return this.get("/Manage/Workflow/getBaseConfig")}static getWorkFlow(e,l,o){return this.post("/Manage/Workflow/getWorkFlow",{WorkflowID:e,MainID:l,MainType:o},{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})}static addNode(e,l,o){return this.post("/Manage/Workflow/addNode",{WorkflowID:l,NodeType:e,MainID:o},{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})}static subWorkFlow(e){return this.post("/Manage/Workflow/Save",e,{headers:{"Content-Type":"application/json"}})}static getNodeExcutionRecord(e,l){return this.post("getNodeExcutionRecord",{workflowID:e,nodeID:l})}static getChatLog(e){return this.post("getChatLog",{ChatSessionID:e})}}var m=h,g=o(1114);class F{}(0,g.A)(F,"guid",(function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var l=16*Math.random()|0,o="x"==e?l:3&l|8;return o.toString(16)}))}));var L=F;const v={key:0,width:"16",height:"16",viewBox:"0 0 32 32"},b=(0,n.Lk)("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"},null,-1),C=[b],f={key:1,width:"16",height:"16",viewBox:"0 0 32 5"},_=(0,n.Lk)("path",{d:"M0 0h32v4.2H0z"},null,-1),y=[_],w={key:2,width:"16",height:"16",viewBox:"0 0 32 32"},D=(0,n.Lk)("path",{d:"M18 28A12 12 0 1 0 6 16v6.2l-3.6-3.6L1 20l6 6l6-6l-1.4-1.4L8 22.2V16a10 10 0 1 1 10 10Z"},null,-1),I=[D],N={key:3,width:"16",height:"16",viewBox:"0 0 24 24"},V=(0,n.Lk)("path",{d:"M14 20v-2h2.6l-3.2-3.2l1.425-1.425L18 16.55V14h2v6Zm-8.6 0L4 18.6L16.6 6H14V4h6v6h-2V7.4Zm3.775-9.425L4 5.4L5.4 4l5.175 5.175Z"},null,-1),T=[V],M={key:4,width:"16",height:"16",viewBox:"0 0 24 24"},x=(0,n.Lk)("path",{d:"M12 17q-2.075 0-3.537-1.463Q7 14.075 7 12t1.463-3.538Q9.925 7 12 7t3.538 1.462Q17 9.925 17 12q0 2.075-1.462 3.537Q14.075 17 12 17ZM2 13q-.425 0-.712-.288Q1 12.425 1 12t.288-.713Q1.575 11 2 11h2q.425 0 .713.287Q5 11.575 5 12t-.287.712Q4.425 13 4 13Zm18 0q-.425 0-.712-.288Q19 12.425 19 12t.288-.713Q19.575 11 20 11h2q.425 0 .712.287q.288.288.288.713t-.288.712Q22.425 13 22 13Zm-8-8q-.425 0-.712-.288Q11 4.425 11 4V2q0-.425.288-.713Q11.575 1 12 1t.713.287Q13 1.575 13 2v2q0 .425-.287.712Q12.425 5 12 5Zm0 18q-.425 0-.712-.288Q11 22.425 11 22v-2q0-.425.288-.712Q11.575 19 12 19t.713.288Q13 19.575 13 20v2q0 .425-.287.712Q12.425 23 12 23ZM5.65 7.05L4.575 6q-.3-.275-.288-.7q.013-.425.288-.725q.3-.3.725-.3t.7.3L7.05 5.65q.275.3.275.7q0 .4-.275.7q-.275.3-.687.287q-.413-.012-.713-.287ZM18 19.425l-1.05-1.075q-.275-.3-.275-.712q0-.413.275-.688q.275-.3.688-.287q.412.012.712.287L19.425 18q.3.275.288.7q-.013.425-.288.725q-.3.3-.725.3t-.7-.3ZM16.95 7.05q-.3-.275-.287-.688q.012-.412.287-.712L18 4.575q.275-.3.7-.288q.425.013.725.288q.3.3.3.725t-.3.7L18.35 7.05q-.3.275-.7.275q-.4 0-.7-.275ZM4.575 19.425q-.3-.3-.3-.725t.3-.7l1.075-1.05q.3-.275.713-.275q.412 0 .687.275q.3.275.288.688q-.013.412-.288.712L6 19.425q-.275.3-.7.287q-.425-.012-.725-.287Z"},null,-1),j=[x],E={key:5,width:"16",height:"16",viewBox:"0 0 24 24"},X=(0,n.Lk)("path",{d:"M12 21q-3.75 0-6.375-2.625T3 12q0-3.75 2.625-6.375T12 3q.35 0 .688.025q.337.025.662.075q-1.025.725-1.637 1.887Q11.1 6.15 11.1 7.5q0 2.25 1.575 3.825Q14.25 12.9 16.5 12.9q1.375 0 2.525-.613q1.15-.612 1.875-1.637q.05.325.075.662Q21 11.65 21 12q0 3.75-2.625 6.375T12 21Z"},null,-1),S=[X],U={key:6,width:"16",height:"16",viewBox:"0 0 24 24"},R=(0,n.Lk)("path",{d:"M20 19V7H4v12h16m0-16a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h16m-7 14v-2h5v2h-5m-3.42-4L5.57 9H8.4l3.3 3.3c.39.39.39 1.03 0 1.42L8.42 17H5.59l3.99-4Z"},null,-1),O=[R];var B={__name:"ToolIcon",props:{name:{type:String,required:!0}},setup(e){return(l,o)=>((0,n.uX)(),(0,n.CE)(n.FK,null,["zoomin"===e.name?((0,n.uX)(),(0,n.CE)("svg",v,C)):(0,n.Q3)("",!0),"zoomout"===e.name?((0,n.uX)(),(0,n.CE)("svg",f,y)):(0,n.Q3)("",!0),"reset"===e.name?((0,n.uX)(),(0,n.CE)("svg",w,I)):(0,n.Q3)("",!0),"update"===e.name?((0,n.uX)(),(0,n.CE)("svg",N,T)):(0,n.Q3)("",!0),"sun"===e.name?((0,n.uX)(),(0,n.CE)("svg",M,j)):(0,n.Q3)("",!0),"moon"===e.name?((0,n.uX)(),(0,n.CE)("svg",E,S)):(0,n.Q3)("",!0),"log"===e.name?((0,n.uX)(),(0,n.CE)("svg",U,O)):(0,n.Q3)("",!0)],64))}};const A=B;var Q=A;const P={key:0,class:"NodeToolBox"},K=(0,n.Lk)("div",{class:"title"},"选择节点",-1),q={class:"items iconfont"},W=["onClick"],J={class:"Name"},$=(0,n.Lk)("div",{class:"Icon RBt icon-jinrujiantouxiao"},null,-1);function H(e,l,o,t,s,i){return o.isVisible?((0,n.uX)(),(0,n.CE)("div",P,[K,(0,n.Lk)("div",q,[(0,n.Lk)("ul",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.NodeList.filter((e=>e.NodeClass==(1==o.nodeClass?"App":"Agent"))),((e,l)=>((0,n.uX)(),(0,n.CE)("li",{key:l,onClick:l=>i.addNode(e.NodeType)},[(0,n.Lk)("div",{class:(0,a.C4)(["Icon",e.Icon])},null,2),(0,n.Lk)("div",J,(0,a.v_)(e.NodeName),1),$],8,W)))),128))])])])):(0,n.Q3)("",!0)}var Z=o(8875),z={name:"ToolBox",props:{node:Object,workflowID:String,mainID:String,isVisible:Boolean,nodeClass:Number},data(){return{NodeList:[{NodeName:"大模型",NodeType:"LargeModel",Icon:"icon-LargeModel",Description:"调用大语言模型，处理变量，配合提示词，生成输出",NodeClass:"Agent"},{NodeName:"知识库",NodeType:"KnowledgeBase",Icon:"icon-KnowledgeBase",Description:"根据输入的文本，调用知识库，获取知识库数据",NodeClass:"Agent"},{NodeName:"插件",NodeType:"Plugins",Icon:"icon-Plugins",Description:"插件可以提供更多能力，外部操作，获取外部数据等",NodeClass:"Agent"},{NodeName:"选择器",NodeType:"Selector",Icon:"icon-selector1",Description:"可以通过选择器的定义，链接多个下游执行节点",NodeClass:"Agent"},{NodeName:"Agent",NodeType:"Agent",Icon:"icon-Agent",Description:"调用Agent可以实现更多复杂组合",NodeClass:"App"},{NodeName:"时间触发器",NodeType:"TimeTrigger",Icon:"icon-TimeTrigger",Description:"可以定义一个特定时间点来触发下个节点",NodeClass:"App"}]}},methods:{addNode(e){m.addNode(e,this.workflowID,this.mainID).then((e=>{if(console.log(e),e.Status){var l=e.Data;this.$emit("addNode",l.Config)}else(0,Z.me)({type:"warn",title:"Warn",text:e.ErrorDesc})}))}}},Y=o(1241);const G=(0,Y.A)(z,[["render",H]]);var ee=G;const le={class:"Title"},oe={class:"LastUpdateTime"},te={class:"dialog-footer"};function ne(e,l,o,t,s,i){const d=(0,n.g2)("el-input"),u=(0,n.g2)("el-form-item"),c=(0,n.g2)("el-form"),p=(0,n.g2)("el-button"),r=(0,n.g2)("el-dialog");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("div",{class:"WorkFlowInfo",onClick:l[0]||(l[0]=(...e)=>t.toggleDialog&&t.toggleDialog(...e))},[(0,n.Lk)("div",le,(0,a.v_)(o.info.WorkflowName),1),(0,n.Lk)("div",oe,(0,a.v_)(new Date(o.info.LastUpdateTime).toLocaleString()),1)]),(0,n.bF)(r,{modelValue:t.dialogFormVisible,"onUpdate:modelValue":l[3]||(l[3]=e=>t.dialogFormVisible=e),title:"工作流信息",width:"500"},{footer:(0,n.k6)((()=>[(0,n.Lk)("div",te,[(0,n.bF)(p,{onClick:t.closeDialog},{default:(0,n.k6)((()=>[(0,n.eW)("取消")])),_:1},8,["onClick"]),(0,n.bF)(p,{type:"primary",onClick:i.save},{default:(0,n.k6)((()=>[(0,n.eW)("保存")])),_:1},8,["onClick"])])])),default:(0,n.k6)((()=>[(0,n.bF)(c,{model:e.form,"label-width":"auto"},{default:(0,n.k6)((()=>[(0,n.bF)(u,{label:"工作流名称","label-position":"right"},{default:(0,n.k6)((()=>[(0,n.bF)(d,{modelValue:t.Info.WorkflowName,"onUpdate:modelValue":l[1]||(l[1]=e=>t.Info.WorkflowName=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),(0,n.bF)(u,{label:"说明","label-position":"right"},{default:(0,n.k6)((()=>[(0,n.bF)(d,{modelValue:t.Info.Description,"onUpdate:modelValue":l[2]||(l[2]=e=>t.Info.Description=e),"show-word-limit":"",maxlength:"128",type:"textarea"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])],64)}var ae={name:"WorkFlowInfo",props:{node:Object,workflowID:String,isVisible:Boolean,info:Object},setup(e){const l=(0,i.KR)(!1),o=(0,i.KR)({});(0,n.sV)((()=>{o.value={...e.info}})),(0,n.wB)((()=>e.info),(e=>{o.value={...e}}),{immediate:!0});const t=()=>{l.value=!l.value},a=()=>{l.value=!1};return{dialogFormVisible:l,Info:o,toggleDialog:t,closeDialog:a}},methods:{show(){this.dialogFormVisible=!this.dialogFormVisible},save(){this.$emit("save",this.Info),this.dialogFormVisible=!1}}};const se=(0,Y.A)(ae,[["render",ne]]);var ie=se;const de={class:"WorkFlowData"},ue={class:"title"};function ce(e,l,o,t,s,i){return(0,n.uX)(),(0,n.CE)("div",de,[(0,n.Lk)("div",ue,(0,a.v_)(o.title),1)])}var pe={name:"WorkFlowData",props:{title:String}};const re=(0,Y.A)(pe,[["render",ce]]);var ke=re,he=o(8074);const me={class:"slider-input"},ge=["min","max"];function Fe(e,l,o,s,i,d){return(0,n.uX)(),(0,n.CE)("div",me,[(0,n.bo)((0,n.Lk)("input",{type:"range",min:o.min,max:o.max,"onUpdate:modelValue":l[0]||(l[0]=e=>i.inputValue=e),onInput:l[1]||(l[1]=e=>d.updateValue(e.target.value)),onMousedown:l[2]||(l[2]=(0,t.D$)(((...e)=>s.handleRangeMouseDown&&s.handleRangeMouseDown(...e)),["stop"]))},null,40,ge),[[t.Jo,i.inputValue]]),(0,n.Lk)("span",null,(0,a.v_)(i.inputValue),1)])}var Le={props:{modelValue:{type:Number,default:0},min:{type:Number,default:0},max:{type:Number,default:100}},setup(){const e=()=>{};return{handleRangeMouseDown:e}},data(){return{inputValue:this.modelValue}},watch:{modelValue(e){this.inputValue=e}},methods:{updateValue(e){this.inputValue=e,this.$emit("update:modelValue",e)}}};const ve=(0,Y.A)(Le,[["render",Fe]]);var be=ve;const Ce={class:"Title"},fe=(0,n.Lk)("span",{class:"Icon ticon icon-LargeModel"},null,-1),_e=(0,n.Lk)("span",null,"大语言模型",-1),ye={key:0,class:"Content"},we=(0,n.Lk)("div",{class:"Description"},"调用大语言模型，处理变量，配合提示词，生成输出",-1),De={class:"LargeModel Content"},Ie={class:"Title"},Ne=(0,n.Lk)("span",null,"模型",-1),Ve={key:0},Te=["value"],Me={class:"Inputs Content"},xe={class:"Title"},je=(0,n.Lk)("span",null,"提示词函数(插件)",-1),Ee={key:0},Xe={class:"Plugins Content"},Se={class:"Title"},Ue=(0,n.Lk)("span",null,"原生函数(插件)",-1),Re={key:0},Oe={class:"Inputs Content"},Be={class:"Title"},Ae=(0,n.Lk)("span",null,"输入",-1),Qe={key:0},Pe=(0,n.Lk)("thead",null,[(0,n.Lk)("th",null,"变量名"),(0,n.Lk)("th",null,"描述")],-1),Ke=["onUpdate:modelValue"],qe=["onUpdate:modelValue"],We={class:"Prompt Content"},Je={class:"Title"},$e=(0,n.Lk)("span",null,"提示词（将输入变量与提示词整理，并让AI重新生成返回结果）",-1),He={key:0},Ze=["placeholder"],ze={class:"Coefficient Content"},Ye={class:"Title"},Ge=(0,n.Lk)("span",null,"系数设置",-1),el={key:0},ll={class:"Outputs Content"},ol={class:"Title"},tl=(0,n.Lk)("span",null,"输出",-1),nl={key:0},al=(0,n.Lk)("thead",null,[(0,n.Lk)("th",null,"变量名"),(0,n.Lk)("th",null,"描述")],-1),sl=["onUpdate:modelValue"],il=["onUpdate:modelValue"],dl={name:"LargeModelNode",props:{id:String,isSelected:Boolean,data:Object,largeModel:Object,plugins:Object},components:{Multiselect:he.Ay,SliderInput:be},data(){return{label:this.data.label,nodeData:this.data,largeModelList:this.largeModel,pluginsList:this.plugins,isFold:!0,isFold_inputs:!0,isFold_outputs:!0,isFold_prompt:!0,isFold_largemodel:!0,isFold_plugins:!0,isFold_plugins2:!0,isFold_Coefficient:!0}},methods:{handleRangeMouseDown(){},saveNode(){this.$emit("saveNode",{id:this.id,data:{...this.nodeData,label:this.label}})},saveLabel(){this.saveNode()},checkFold(){this.isFold=!this.isFold},checkFoldInputs(){this.isFold_inputs=!this.isFold_inputs},checkFoldOutputs(){this.isFold_outputs=!this.isFold_outputs},checkFoldPrompt(){this.isFold_prompt=!this.isFold_prompt},checkFoldLargeModel(){this.isFold_largemodel=!this.isFold_largemodel},checkFoldPlugins(){this.isFold_plugins=!this.isFold_plugins},checkFoldPlugins2(){this.isFold_plugins2=!this.isFold_plugins2},checkCoefficient(){this.isFold_Coefficient=!this.isFold_Coefficient}}};var ul=Object.assign(dl,{setup(e){return(l,o)=>{const s=(0,n.g2)("el-form-item"),u=(0,n.g2)("el-form");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)((0,i.R1)(d.h7),{class:"Handle",type:"target",position:(0,i.R1)(d.yX).Left,style:{}},null,8,["position"]),(0,n.bF)((0,i.R1)(d.h7),{class:"Handle",type:"source",position:(0,i.R1)(d.yX).Right,style:{}},null,8,["position"]),(0,n.Lk)("div",{class:(0,a.C4)(["NodeBox LargeModelNode iconfont",[e.isSelected?"Selected":"",""]])},[(0,n.Lk)("div",Ce,[(0,n.Lk)("span",{class:(0,a.C4)(["Icon fold",[l.isFold?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:o[0]||(o[0]=(...e)=>l.checkFold&&l.checkFold(...e))},null,2),fe,_e,(0,n.bo)((0,n.Lk)("input",{class:"label","onUpdate:modelValue":o[1]||(o[1]=e=>l.label=e),value:"{{label}}",placeholder:"备注",onBlur:o[2]||(o[2]=(...e)=>l.saveLabel&&l.saveLabel(...e))},null,544),[[t.Jo,l.label]])]),l.isFold?((0,n.uX)(),(0,n.CE)("div",ye,[we,(0,n.Lk)("div",De,[(0,n.Lk)("div",Ie,[(0,n.Lk)("span",{class:(0,a.C4)(["Icon fold",[l.isFold_largemodel?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:o[3]||(o[3]=(...e)=>l.checkFoldLargeModel&&l.checkFoldLargeModel(...e))},null,2),Ne]),l.isFold_largemodel?((0,n.uX)(),(0,n.CE)("div",Ve,[(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":o[4]||(o[4]=e=>l.nodeData.model.LargeModelID=e)},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.largeModelList,((e,l)=>((0,n.uX)(),(0,n.CE)("option",{key:l,value:e.LargeModelID},(0,a.v_)(e.ModelOrganizationName)+"("+(0,a.v_)(e.Name)+") ",9,Te)))),128))],512),[[t.u1,l.nodeData.model.LargeModelID]])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",Me,[(0,n.Lk)("div",xe,[(0,n.Lk)("span",{class:(0,a.C4)(["Icon fold",[l.isFold_plugins?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:o[5]||(o[5]=(...e)=>l.checkFoldPlugins&&l.checkFoldPlugins(...e))},null,2),je]),l.isFold_plugins?((0,n.uX)(),(0,n.CE)("div",Ee,[(0,n.bF)((0,i.R1)(he.Ay),{modelValue:l.nodeData.SemanticFunction,"onUpdate:modelValue":o[6]||(o[6]=e=>l.nodeData.SemanticFunction=e),placeholder:"请选择函数",multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,label:"Name","track-by":"Name",taggable:"true",options:l.pluginsList.filter((e=>1==e.PluginsType))},null,8,["modelValue","options"])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",Xe,[(0,n.Lk)("div",Se,[(0,n.Lk)("span",{class:(0,a.C4)(["Icon fold",[l.isFold_plugins2?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:o[7]||(o[7]=(...e)=>l.checkFoldPlugins2&&l.checkFoldPlugins2(...e))},null,2),Ue]),l.isFold_plugins2?((0,n.uX)(),(0,n.CE)("div",Re,[(0,n.bF)((0,i.R1)(he.Ay),{modelValue:l.nodeData.NativeFunction,"onUpdate:modelValue":o[8]||(o[8]=e=>l.nodeData.NativeFunction=e),placeholder:"请选择函数",multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,label:"Name","track-by":"Name",taggable:"true",options:l.pluginsList.filter((e=>2==e.PluginsType))},null,8,["modelValue","options"])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",Oe,[(0,n.Lk)("div",Be,[(0,n.Lk)("span",{class:(0,a.C4)(["Icon fold",[l.isFold_inputs?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:o[9]||(o[9]=(...e)=>l.checkFoldInputs&&l.checkFoldInputs(...e))},null,2),Ae]),l.isFold_inputs?((0,n.uX)(),(0,n.CE)("div",Qe,[(0,n.Lk)("table",null,[Pe,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.nodeData.inputs,((e,l)=>((0,n.uX)(),(0,n.CE)("tr",{key:l},[(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":l=>e.varname=l},null,8,Ke),[[t.Jo,e.varname]])]),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":l=>e.txt=l},null,8,qe),[[t.Jo,e.txt]])])])))),128))])])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",We,[(0,n.Lk)("div",Je,[(0,n.Lk)("span",{class:(0,a.C4)(["Icon fold",[l.isFold_prompt?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:o[10]||(o[10]=(...e)=>l.checkFoldPrompt&&l.checkFoldPrompt(...e))},null,2),$e]),l.isFold_prompt?((0,n.uX)(),(0,n.CE)("div",He,[(0,n.bo)((0,n.Lk)("textarea",{"onUpdate:modelValue":o[11]||(o[11]=e=>l.nodeData.prompt=e),onMousedown:o[12]||(o[12]=(0,t.D$)(((...e)=>l.handleRangeMouseDown&&l.handleRangeMouseDown(...e)),["stop"])),onWheel:o[13]||(o[13]=(0,t.D$)(((...e)=>l.handleRangeMouseDown&&l.handleRangeMouseDown(...e)),["stop"])),placeholder:["请输入提示词："+l.nodeData.inputs.map((e=>"{{"+e.varname+"}}")).join(",")]},null,40,Ze),[[t.Jo,l.nodeData.prompt]])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",ze,[(0,n.Lk)("div",Ye,[(0,n.Lk)("span",{class:(0,a.C4)(["Icon fold",[l.isFold_Coefficient?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:o[14]||(o[14]=(...e)=>l.checkCoefficient&&l.checkCoefficient(...e))},null,2),Ge]),l.isFold_Coefficient?((0,n.uX)(),(0,n.CE)("div",el,[(0,n.bF)(u,{"label-width":"auto",style:{"max-width":"600px"},"status-icon":""},{default:(0,n.k6)((()=>[(0,n.bF)(s,{label:"随机性(值越大越有创造力)"},{default:(0,n.k6)((()=>[(0,n.bF)(be,{modelValue:l.nodeData.temperature,"onUpdate:modelValue":o[15]||(o[15]=e=>l.nodeData.temperature=e),min:"0",max:"100"},null,8,["modelValue"])])),_:1}),(0,n.bF)(s,{label:"多样性(值越大越有多样性)"},{default:(0,n.k6)((()=>[(0,n.bF)(be,{modelValue:l.nodeData.topp,"onUpdate:modelValue":o[16]||(o[16]=e=>l.nodeData.topp=e),min:"0",max:"100"},null,8,["modelValue"])])),_:1})])),_:1})])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",ll,[(0,n.Lk)("div",ol,[(0,n.Lk)("span",{class:(0,a.C4)(["Icon fold",[l.isFold_outputs?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:o[17]||(o[17]=(...e)=>l.checkFoldOutputs&&l.checkFoldOutputs(...e))},null,2),tl]),l.isFold_outputs?((0,n.uX)(),(0,n.CE)("div",nl,[(0,n.Lk)("table",null,[al,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.nodeData.output,((e,l)=>((0,n.uX)(),(0,n.CE)("tr",{key:l},[(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":l=>e.varname=l},null,8,sl),[[t.Jo,e.varname]])]),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":l=>e.txt=l},null,8,il),[[t.Jo,e.txt]])])])))),128))])])])):(0,n.Q3)("",!0)])])):(0,n.Q3)("",!0)],2)],64)}}});const cl=ul;var pl=cl;const rl={class:"Title"},kl=(0,n.Lk)("span",{class:"Icon ticon icon-Plugins"},null,-1),hl=(0,n.Lk)("span",null,"插件",-1),ml={key:0,class:"Content"},gl=(0,n.Lk)("div",{class:"Description"},"插件可以提供更多能力，外部操作，获取外部数据等",-1),Fl={class:"Plugins Content"},Ll={class:"Title"},vl=(0,n.Lk)("span",null,"插件",-1),bl={key:0},Cl=["value"],fl={class:"Inputs Content"},_l={class:"Title"},yl=(0,n.Lk)("span",null,"输入",-1),wl={key:0},Dl=(0,n.Lk)("thead",null,[(0,n.Lk)("th",null,"变量名"),(0,n.Lk)("th",null,"描述")],-1),Il=["onUpdate:modelValue"],Nl=["onUpdate:modelValue"],Vl={class:"Outputs Content"},Tl={class:"Title"},Ml=(0,n.Lk)("span",null,"输出",-1),xl={key:0},jl=(0,n.Lk)("thead",null,[(0,n.Lk)("th",null,"变量名"),(0,n.Lk)("th",null,"描述")],-1),El=["onUpdate:modelValue"],Xl=["onUpdate:modelValue"],Sl={name:"PluginsNode",props:{id:String,isSelected:Boolean,data:Object,plugins:Object},data(){return{label:this.data.label,nodeData:this.data,pluginsList:this.plugins,isFold:!0,isFold_inputs:!0,isFold_outputs:!0,isFold_plugins:!0}},methods:{saveNode(){this.$emit("saveNode",{id:this.id,data:{...this.nodeData,label:this.label}})},saveLabel(){this.saveNode()},checkFold(){this.isFold=!this.isFold},checkFoldInputs(){this.isFold_inputs=!this.isFold_inputs},checkFoldOutputs(){this.isFold_outputs=!this.isFold_outputs},checkFoldPlugins(){this.isFold_plugins=!this.isFold_plugins}}};var Ul=Object.assign(Sl,{setup(e){return(l,o)=>((0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)((0,i.R1)(d.h7),{class:"Handle",type:"target",position:(0,i.R1)(d.yX).Left,style:{}},null,8,["position"]),(0,n.bF)((0,i.R1)(d.h7),{class:"Handle",type:"source",position:(0,i.R1)(d.yX).Right,style:{}},null,8,["position"]),(0,n.Lk)("div",{class:(0,a.C4)(["NodeBox Plugins iconfont",[e.isSelected?"Selected":"",""]])},[(0,n.Lk)("div",rl,[(0,n.Lk)("span",{class:(0,a.C4)(["Icon fold",[l.isFold?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:o[0]||(o[0]=(...e)=>l.checkFold&&l.checkFold(...e))},null,2),kl,hl,(0,n.bo)((0,n.Lk)("input",{class:"label","onUpdate:modelValue":o[1]||(o[1]=e=>l.label=e),value:"{{label}}",placeholder:"备注",onBlur:o[2]||(o[2]=(...e)=>l.saveLabel&&l.saveLabel(...e))},null,544),[[t.Jo,l.label]])]),l.isFold?((0,n.uX)(),(0,n.CE)("div",ml,[gl,(0,n.Lk)("div",Fl,[(0,n.Lk)("div",Ll,[(0,n.Lk)("span",{class:(0,a.C4)(["Icon fold",[l.isFold_plugins?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:o[3]||(o[3]=(...e)=>l.checkFoldPlugins&&l.checkFoldPlugins(...e))},null,2),vl]),l.isFold_plugins?((0,n.uX)(),(0,n.CE)("div",bl,[(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":o[4]||(o[4]=e=>l.nodeData.plugins.PluginsID=e)},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.pluginsList.filter((e=>0==e.PluginsType)),((e,l)=>((0,n.uX)(),(0,n.CE)("option",{key:l,value:e.PluginsID},(0,a.v_)(e.Name),9,Cl)))),128))],512),[[t.u1,l.nodeData.plugins.PluginsID]])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",fl,[(0,n.Lk)("div",_l,[(0,n.Lk)("span",{class:(0,a.C4)(["Icon fold",[l.isFold_inputs?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:o[5]||(o[5]=(...e)=>l.checkFoldInputs&&l.checkFoldInputs(...e))},null,2),yl]),l.isFold_inputs?((0,n.uX)(),(0,n.CE)("div",wl,[(0,n.Lk)("table",null,[Dl,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.nodeData.inputs,((e,l)=>((0,n.uX)(),(0,n.CE)("tr",{key:l},[(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":l=>e.varname=l},null,8,Il),[[t.Jo,e.varname]])]),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":l=>e.txt=l},null,8,Nl),[[t.Jo,e.txt]])])])))),128))])])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",Vl,[(0,n.Lk)("div",Tl,[(0,n.Lk)("span",{class:(0,a.C4)(["Icon fold",[l.isFold_outputs?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:o[6]||(o[6]=(...e)=>l.checkFoldOutputs&&l.checkFoldOutputs(...e))},null,2),Ml]),l.isFold_outputs?((0,n.uX)(),(0,n.CE)("div",xl,[(0,n.Lk)("table",null,[jl,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.nodeData.output,((e,l)=>((0,n.uX)(),(0,n.CE)("tr",{key:l},[(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":l=>e.varname=l},null,8,El),[[t.Jo,e.varname]])]),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":l=>e.txt=l},null,8,Xl),[[t.Jo,e.txt]])])])))),128))])])])):(0,n.Q3)("",!0)])])):(0,n.Q3)("",!0)],2)],64))}});const Rl=Ul;var Ol=Rl;const Bl={class:"Title"},Al=(0,n.Lk)("span",{class:"Icon ticon icon-start"},null,-1),Ql=(0,n.Lk)("span",null,"开始",-1),Pl={key:0,class:"Content"},Kl=(0,n.Lk)("div",{class:"Description"},"工作流的起始节点，用于设定启动工作流需要的信息",-1),ql={class:"Inputs Content"},Wl={class:"Title"},Jl=(0,n.Lk)("span",null,"输入",-1),$l={key:0},Hl=(0,n.Lk)("thead",null,[(0,n.Lk)("th",null,"变量名"),(0,n.Lk)("th",null,"描述")],-1),Zl=["onUpdate:modelValue"],zl=["onUpdate:modelValue"],Yl={class:"Prompt Content"},Gl={class:"Title"},eo=(0,n.Lk)("span",null,"提示词",-1),lo={key:0},oo=["placeholder"],to={class:"Outputs Content"},no={class:"Title"},ao=(0,n.Lk)("span",null,"输出",-1),so={key:0},io=(0,n.Lk)("thead",null,[(0,n.Lk)("th",null,"变量名"),(0,n.Lk)("th",null,"描述")],-1),uo=["onUpdate:modelValue"],co=["onUpdate:modelValue"],po={name:"StartNode",props:{id:String,isSelected:Boolean,data:Object},data(){return{label:this.data.label,nodeData:this.data,isFold:!0,isFold_inputs:!0,isFold_outputs:!0,isFold_prompt:!0}},methods:{handleRangeMouseDown(){},saveNode(){this.$emit("saveNode",{id:this.id,data:{...this.nodeData,label:this.label}})},saveLabel(){this.saveNode()},checkFold(){this.isFold=!this.isFold},checkFoldInputs(){this.isFold_inputs=!this.isFold_inputs},checkFoldOutputs(){this.isFold_outputs=!this.isFold_outputs},checkFoldPrompt(){this.isFold_prompt=!this.isFold_prompt}}};var ro=Object.assign(po,{setup(e){return(l,o)=>((0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)((0,i.R1)(d.h7),{class:"Handle",type:"source",position:(0,i.R1)(d.yX).Right,style:{}},null,8,["position"]),(0,n.Lk)("div",{class:(0,a.C4)(["NodeBox StartNode iconfont",[e.isSelected?"Selected":"",""]])},[(0,n.Lk)("div",Bl,[(0,n.Lk)("span",{class:(0,a.C4)(["Icon fold",[l.isFold?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:o[0]||(o[0]=(...e)=>l.checkFold&&l.checkFold(...e))},null,2),Al,Ql]),l.isFold?((0,n.uX)(),(0,n.CE)("div",Pl,[Kl,(0,n.Lk)("div",ql,[(0,n.Lk)("div",Wl,[(0,n.Lk)("span",{class:(0,a.C4)(["Icon fold",[l.isFold_inputs?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:o[1]||(o[1]=(...e)=>l.checkFoldInputs&&l.checkFoldInputs(...e))},null,2),Jl]),l.isFold_inputs?((0,n.uX)(),(0,n.CE)("div",$l,[(0,n.Lk)("table",null,[Hl,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.nodeData.inputs,((e,l)=>((0,n.uX)(),(0,n.CE)("tr",{key:l},[(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":l=>e.varname=l},null,8,Zl),[[t.Jo,e.varname]])]),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":l=>e.txt=l},null,8,zl),[[t.Jo,e.txt]])])])))),128))])])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",Yl,[(0,n.Lk)("div",Gl,[(0,n.Lk)("span",{class:(0,a.C4)(["Icon fold",[l.isFold_prompt?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:o[2]||(o[2]=(...e)=>l.checkFoldPrompt&&l.checkFoldPrompt(...e))},null,2),eo]),l.isFold_prompt?((0,n.uX)(),(0,n.CE)("div",lo,[(0,n.bo)((0,n.Lk)("textarea",{"onUpdate:modelValue":o[3]||(o[3]=e=>l.nodeData.prompt=e),onMousedown:o[4]||(o[4]=(0,t.D$)(((...e)=>l.handleRangeMouseDown&&l.handleRangeMouseDown(...e)),["stop"])),onWheel:o[5]||(o[5]=(0,t.D$)(((...e)=>l.handleRangeMouseDown&&l.handleRangeMouseDown(...e)),["stop"])),placeholder:["请输入提示词："+l.nodeData.inputs.map((e=>"{{"+e.varname+"}}")).join(",")]},null,40,oo),[[t.Jo,l.nodeData.prompt]])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",to,[(0,n.Lk)("div",no,[(0,n.Lk)("span",{class:(0,a.C4)(["Icon fold",[l.isFold_outputs?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:o[6]||(o[6]=(...e)=>l.checkFoldOutputs&&l.checkFoldOutputs(...e))},null,2),ao]),l.isFold_outputs?((0,n.uX)(),(0,n.CE)("div",so,[(0,n.Lk)("table",null,[io,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.nodeData.output,((e,l)=>((0,n.uX)(),(0,n.CE)("tr",{key:l},[(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":l=>e.varname=l},null,8,uo),[[t.Jo,e.varname]])]),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":l=>e.txt=l},null,8,co),[[t.Jo,e.txt]])])])))),128))])])])):(0,n.Q3)("",!0)])])):(0,n.Q3)("",!0)],2)],64))}});const ko=ro;var ho=ko;const mo={class:"Title"},go=(0,n.Lk)("span",{class:"Icon ticon icon-end"},null,-1),Fo=(0,n.Lk)("span",null,"结束",-1),Lo={key:0,class:"Content"},vo=(0,n.Lk)("div",{class:"Description"},"工作流的结束节点，用于返回工作流运行后的结果信息",-1),bo={class:"Inputs Content"},Co={class:"Title"},fo=(0,n.Lk)("span",null,"输入",-1),_o={key:0},yo=(0,n.Lk)("thead",null,[(0,n.Lk)("th",null,"变量名"),(0,n.Lk)("th",null,"描述")],-1),wo=["onUpdate:modelValue"],Do=["onUpdate:modelValue"],Io={class:"Prompt Content"},No={class:"Title"},Vo=(0,n.Lk)("span",null,"提示词（将输出变量与提示词整理，并让AI重新生成返回结果）",-1),To={key:0},Mo=["placeholder"],xo={name:"EndNode",props:{id:String,isSelected:Boolean,data:Object},data(){return{label:this.data.label,nodeData:this.data,isFold:!0,isFold_inputs:!0,isFold_prompt:!0}},methods:{handleRangeMouseDown(){},saveNode(){this.$emit("saveNode",{id:this.id,data:{...this.nodeData,label:this.label}})},saveLabel(){this.saveNode()},checkFold(){this.isFold=!this.isFold},checkFoldInputs(){this.isFold_inputs=!this.isFold_inputs},checkFoldPrompt(){this.isFold_prompt=!this.isFold_prompt}}};var jo=Object.assign(xo,{setup(e){return(l,o)=>((0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)((0,i.R1)(d.h7),{class:"Handle",type:"target",position:(0,i.R1)(d.yX).Left,style:{}},null,8,["position"]),(0,n.Lk)("div",{class:(0,a.C4)(["NodeBox EndNode iconfont",[e.isSelected?"Selected":"",""]])},[(0,n.Lk)("div",mo,[(0,n.Lk)("span",{class:(0,a.C4)(["Icon fold",[l.isFold?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:o[0]||(o[0]=(...e)=>l.checkFold&&l.checkFold(...e))},null,2),go,Fo]),l.isFold?((0,n.uX)(),(0,n.CE)("div",Lo,[vo,(0,n.Lk)("div",bo,[(0,n.Lk)("div",Co,[(0,n.Lk)("span",{class:(0,a.C4)(["Icon fold",[l.isFold_inputs?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:o[1]||(o[1]=(...e)=>l.checkFoldInputs&&l.checkFoldInputs(...e))},null,2),fo]),l.isFold_inputs?((0,n.uX)(),(0,n.CE)("div",_o,[(0,n.Lk)("table",null,[yo,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.nodeData.inputs,((e,l)=>((0,n.uX)(),(0,n.CE)("tr",{key:l},[(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":l=>e.varname=l},null,8,wo),[[t.Jo,e.varname]])]),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":l=>e.txt=l},null,8,Do),[[t.Jo,e.txt]])])])))),128))])])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",Io,[(0,n.Lk)("div",No,[(0,n.Lk)("span",{class:(0,a.C4)(["Icon fold",[l.isFold_prompt?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:o[2]||(o[2]=(...e)=>l.checkFoldPrompt&&l.checkFoldPrompt(...e))},null,2),Vo]),l.isFold_prompt?((0,n.uX)(),(0,n.CE)("div",To,[(0,n.bo)((0,n.Lk)("textarea",{"onUpdate:modelValue":o[3]||(o[3]=e=>l.nodeData.prompt=e),onMousedown:o[4]||(o[4]=(0,t.D$)(((...e)=>l.handleRangeMouseDown&&l.handleRangeMouseDown(...e)),["stop"])),onWheel:o[5]||(o[5]=(0,t.D$)(((...e)=>l.handleRangeMouseDown&&l.handleRangeMouseDown(...e)),["stop"])),placeholder:["请输入提示词："+l.nodeData.inputs.map((e=>"{{"+e.varname+"}}")).join(",")]},null,40,Mo),[[t.Jo,l.nodeData.prompt]])])):(0,n.Q3)("",!0)])])):(0,n.Q3)("",!0)],2)],64))}});const Eo=jo;var Xo=Eo;const So={class:"Title"},Uo=(0,n.Lk)("span",{class:"Icon ticon icon-selector1"},null,-1),Ro=(0,n.Lk)("span",null,"选择器",-1),Oo={key:0,class:"Content"},Bo=(0,n.Lk)("div",{class:"Description"},"可以通过选择器的定义，链接多个下游执行节点",-1),Ao={class:"Inputs Content"},Qo={class:"Title"},Po=(0,n.Lk)("span",null,"输入",-1),Ko={key:0},qo=(0,n.Lk)("thead",null,[(0,n.Lk)("th",null,"变量名"),(0,n.Lk)("th",null,"描述")],-1),Wo=["onUpdate:modelValue"],Jo=["onUpdate:modelValue"],$o={class:"Selector Content"},Ho={class:"Title"},Zo=(0,n.Lk)("span",null,"条件判断",-1),zo={key:0},Yo=(0,n.Lk)("thead",null,[(0,n.Lk)("th",null,"变量名"),(0,n.Lk)("th",null,"判断条件"),(0,n.Lk)("th",null,"比较值"),(0,n.Lk)("th",null,"删除")],-1),Go=["onUpdate:modelValue"],et=["value"],lt=["onUpdate:modelValue"],ot=["value"],tt=["onUpdate:modelValue"],nt=["onClick"],at=(0,n.Lk)("span",{class:"Icon ticon icon-add"},null,-1),st=(0,n.Lk)("span",null,"增加条件",-1),it=[at,st],dt={name:"SelectorNode",props:{id:String,isSelected:Boolean,data:Object},created(){},data(){return{label:this.data.label,nodeData:this.data,isFold:!0,isFold_inputs:!0,isFold_selector:!0,selectorList:this.data.selector?this.data.selector.map(((e,l)=>(e.top=25*l+240,e.top_str="top:"+e.top+"px",e))):[],comparison:[{name:"等于",data:"=",text:"等于"},{name:"不等于",data:"!=",text:"不等于"},{name:"大于",data:">",text:"大于"},{name:"小于",data:"<",text:"小于"},{name:"包含",data:"~=",text:"包含"},{name:"不包含",data:"!~=",text:"不包含"}]}},methods:{resetHandleTop(){var e=185;this.isFold_inputs&&(e+=55),this.isFold_selector&&this.isFold?(this.isFold||this.isFold_inputs)&&(this.selectorList=this.selectorList.map(((l,o)=>(l.top=25*o+e,l.top_str="top:"+l.top+"px",l)))):this.selectorList=this.selectorList.map((e=>(e.top=0,e.top_str="",e)))},saveNode(){this.$emit("saveNode",{id:this.id,data:{...this.nodeData,label:this.label,selector:this.selectorList}})},saveLabel(){this.saveNode()},checkFold(){this.isFold=!this.isFold,this.resetHandleTop()},checkFoldInputs(){this.isFold_inputs=!this.isFold_inputs,this.resetHandleTop()},checkFoldSelector(){this.isFold_selector=!this.isFold_selector,this.resetHandleTop()},onAdd(){var e=this.selectorList.length+1,l=25*this.selectorList.length+240;this.selectorList.push({id:"Handle_"+e,inputs:"2",comparison:"",value:"",top:l,top_str:"top:"+l+"px"}),this.saveNode()},onDel(e){this.selectorList=this.selectorList.filter((l=>l.id!==e.id)),this.saveNode()}}};var ut=Object.assign(dt,{setup(e){return(l,o)=>((0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)((0,i.R1)(d.h7),{id:"target_1",class:"Handle",type:"target",position:(0,i.R1)(d.yX).Left,style:{}},null,8,["position"]),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.selectorList,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e.id},[(0,n.bF)((0,i.R1)(d.h7),{id:e.id,class:"Handle",type:"source",position:(0,i.R1)(d.yX).Right,style:(0,a.Tr)(e.top_str)},null,8,["id","position","style"])])))),128)),(0,n.Lk)("div",{class:(0,a.C4)(["NodeBox SelectorNode iconfont",[e.isSelected?"Selected":"",""]])},[(0,n.Lk)("div",So,[(0,n.Lk)("span",{class:(0,a.C4)(["Icon fold",[l.isFold?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:o[0]||(o[0]=(...e)=>l.checkFold&&l.checkFold(...e))},null,2),Uo,Ro,(0,n.bo)((0,n.Lk)("input",{class:"label","onUpdate:modelValue":o[1]||(o[1]=e=>l.label=e),value:"{{label}}",placeholder:"备注",onBlur:o[2]||(o[2]=(...e)=>l.saveLabel&&l.saveLabel(...e))},null,544),[[t.Jo,l.label]])]),l.isFold?((0,n.uX)(),(0,n.CE)("div",Oo,[Bo,(0,n.Lk)("div",Ao,[(0,n.Lk)("div",Qo,[(0,n.Lk)("span",{class:(0,a.C4)(["Icon fold",[l.isFold_inputs?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:o[3]||(o[3]=(...e)=>l.checkFoldInputs&&l.checkFoldInputs(...e))},null,2),Po]),l.isFold_inputs?((0,n.uX)(),(0,n.CE)("div",Ko,[(0,n.Lk)("table",null,[qo,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.nodeData.inputs,((e,l)=>((0,n.uX)(),(0,n.CE)("tr",{key:l},[(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":l=>e.varname=l},null,8,Wo),[[t.Jo,e.varname]])]),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":l=>e.txt=l},null,8,Jo),[[t.Jo,e.txt]])])])))),128))])])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",$o,[(0,n.Lk)("div",Ho,[(0,n.Lk)("span",{class:(0,a.C4)(["Icon fold",[l.isFold_selector?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:o[4]||(o[4]=(...e)=>l.checkFoldSelector&&l.checkFoldSelector(...e))},null,2),Zo]),l.isFold_selector?((0,n.uX)(),(0,n.CE)("div",zo,[(0,n.Lk)("table",null,[Yo,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.selectorList,(e=>((0,n.uX)(),(0,n.CE)("tr",{key:e.id},[(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":l=>e.inputs=l},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.nodeData.inputs,((e,l)=>((0,n.uX)(),(0,n.CE)("option",{key:l,value:e.varname},(0,a.v_)(e.varname),9,et)))),128))],8,Go),[[t.u1,e.inputs]])]),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":l=>e.comparison=l},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.comparison,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e.name,value:e.data},(0,a.v_)(e.text),9,ot)))),128))],8,lt),[[t.u1,e.comparison]])]),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{placeholder:"留空代表字符串空","onUpdate:modelValue":l=>e.value=l},null,8,tt),[[t.Jo,e.value]])]),(0,n.Lk)("td",null,[(0,n.Lk)("span",{class:"Icon ticon icon-del del",onClick:o=>l.onDel(e)},null,8,nt)])])))),128))]),(0,n.Lk)("footer",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("td",{colspan:"4",class:"add",onClick:o[5]||(o[5]=(...e)=>l.onAdd&&l.onAdd(...e))},it)])])])])):(0,n.Q3)("",!0)])])):(0,n.Q3)("",!0)],2)],64))}});const ct=ut;var pt=ct;const rt={class:"Title"},kt=(0,n.Lk)("span",{class:"Icon ticon icon-KnowledgeBase"},null,-1),ht=(0,n.Lk)("span",null,"知识库",-1),mt={key:0,class:"Content"},gt=(0,n.Lk)("div",{class:"Description"},"根据输入的文本，调用知识库，获取知识库数据",-1),Ft={class:"Inputs Content"},Lt={class:"Title"},vt=(0,n.Lk)("span",null,"输入",-1),bt={key:0},Ct=(0,n.Lk)("thead",null,[(0,n.Lk)("th",null,"变量名"),(0,n.Lk)("th",null,"描述")],-1),ft=["onUpdate:modelValue"],_t=["onUpdate:modelValue"],yt={class:"KnowledgeBase Content"},wt={class:"Title"},Dt=(0,n.Lk)("span",null,"知识库",-1),It={key:0},Nt={class:"Outputs Content"},Vt={class:"Title"},Tt=(0,n.Lk)("span",null,"输出",-1),Mt={key:0},xt=(0,n.Lk)("thead",null,[(0,n.Lk)("th",null,"变量名"),(0,n.Lk)("th",null,"描述")],-1),jt=["onUpdate:modelValue"],Et=["onUpdate:modelValue"],Xt={name:"KnowledgeBaseNode",props:{id:String,isSelected:Boolean,data:Object,knowledgeBase:Object},components:{Multiselect:he.Ay},data(){return{label:this.data.label,nodeData:this.data,KnowledgeBaseList:this.knowledgeBase,isFold:!0,isFold_inputs:!0,isFold_outputs:!0,isFold_KnowledgeBase:!0}},methods:{saveNode(){this.$emit("saveNode",{id:this.id,data:{...this.nodeData,label:this.label}})},saveLabel(){this.saveNode()},checkFold(){this.isFold=!this.isFold},checkFoldInputs(){this.isFold_inputs=!this.isFold_inputs},checkFoldOutputs(){this.isFold_outputs=!this.isFold_outputs},checkFoldKnowledgeBase(){console.log(this.KnowledgeBaseList),this.isFold_KnowledgeBase=!this.isFold_KnowledgeBase}}};var St=Object.assign(Xt,{setup(e){return(l,o)=>((0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)((0,i.R1)(d.h7),{class:"Handle",type:"target",position:(0,i.R1)(d.yX).Left,style:{}},null,8,["position"]),(0,n.bF)((0,i.R1)(d.h7),{class:"Handle",type:"source",position:(0,i.R1)(d.yX).Right,style:{}},null,8,["position"]),(0,n.Lk)("div",{class:(0,a.C4)(["NodeBox KnowledgeBaseNode iconfont",[e.isSelected?"Selected":"",""]])},[(0,n.Lk)("div",rt,[(0,n.Lk)("span",{class:(0,a.C4)(["Icon fold",[l.isFold?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:o[0]||(o[0]=(...e)=>l.checkFold&&l.checkFold(...e))},null,2),kt,ht,(0,n.bo)((0,n.Lk)("input",{class:"label","onUpdate:modelValue":o[1]||(o[1]=e=>l.label=e),value:"{{label}}",placeholder:"备注",onBlur:o[2]||(o[2]=(...e)=>l.saveLabel&&l.saveLabel(...e))},null,544),[[t.Jo,l.label]])]),l.isFold?((0,n.uX)(),(0,n.CE)("div",mt,[gt,(0,n.Lk)("div",Ft,[(0,n.Lk)("div",Lt,[(0,n.Lk)("span",{class:(0,a.C4)(["Icon fold",[l.isFold_inputs?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:o[3]||(o[3]=(...e)=>l.checkFoldInputs&&l.checkFoldInputs(...e))},null,2),vt]),l.isFold_inputs?((0,n.uX)(),(0,n.CE)("div",bt,[(0,n.Lk)("table",null,[Ct,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.nodeData.inputs,((e,l)=>((0,n.uX)(),(0,n.CE)("tr",{key:l},[(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":l=>e.varname=l},null,8,ft),[[t.Jo,e.varname]])]),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":l=>e.txt=l},null,8,_t),[[t.Jo,e.txt]])])])))),128))])])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",yt,[(0,n.Lk)("div",wt,[(0,n.Lk)("span",{class:(0,a.C4)(["Icon fold",[l.isFold_KnowledgeBase?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:o[4]||(o[4]=(...e)=>l.checkFoldKnowledgeBase&&l.checkFoldKnowledgeBase(...e))},null,2),Dt]),l.isFold_KnowledgeBase?((0,n.uX)(),(0,n.CE)("div",It,[(0,n.bF)((0,i.R1)(he.Ay),{modelValue:l.nodeData.knowledgeBase,"onUpdate:modelValue":o[5]||(o[5]=e=>l.nodeData.knowledgeBase=e),placeholder:"请选择知识库",multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,label:"Name","track-by":"Name",taggable:"true",options:l.KnowledgeBaseList},null,8,["modelValue","options"])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",Nt,[(0,n.Lk)("div",Vt,[(0,n.Lk)("span",{class:(0,a.C4)(["Icon fold",[l.isFold_outputs?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:o[6]||(o[6]=(...e)=>l.checkFoldOutputs&&l.checkFoldOutputs(...e))},null,2),Tt]),l.isFold_outputs?((0,n.uX)(),(0,n.CE)("div",Mt,[(0,n.Lk)("table",null,[xt,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.nodeData.output,((e,l)=>((0,n.uX)(),(0,n.CE)("tr",{key:l},[(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":l=>e.varname=l},null,8,jt),[[t.Jo,e.varname]])]),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":l=>e.txt=l},null,8,Et),[[t.Jo,e.txt]])])])))),128))])])])):(0,n.Q3)("",!0)])])):(0,n.Q3)("",!0)],2)],64))}});const Ut=St;var Rt=Ut;const Ot={class:"Title"},Bt=(0,n.Lk)("span",{class:"Icon ticon icon-TimeTrigger"},null,-1),At=(0,n.Lk)("span",null,"时间触发器",-1),Qt={key:0,class:"Content"},Pt=(0,n.Lk)("div",{class:"Description"},"可以定义一个特定时间点来触发下个节点",-1),Kt={class:"TimeTrigger Content"},qt={class:"Title"},Wt=(0,n.Lk)("span",null,"触发周期",-1),Jt={key:0},$t={class:"Prompt Content"},Ht={class:"Title"},Zt=(0,n.Lk)("span",null,"提示词（将输入变量与提示词整理，作为下个节点的输入参数）",-1),zt={key:0},Yt={class:"Outputs Content"},Gt={class:"Title"},en=(0,n.Lk)("span",null,"输出",-1),ln={key:0},on=(0,n.Lk)("thead",null,[(0,n.Lk)("th",null,"变量名"),(0,n.Lk)("th",null,"描述")],-1),tn=["onUpdate:modelValue"],nn=["onUpdate:modelValue"],an={name:"TimeTriggerNode",props:{id:String,isSelected:Boolean,data:Object},created(){},data(){return{label:this.data.label,nodeData:this.data,isFold:!0,isFold_outputs:!0,isFold_TimeTrigger:!0,isFold_prompt:!0,loopType:[{name:"每隔n秒",data:"s",text:"每n秒"},{name:"每隔n天",data:"d",text:"每n天"},{name:"每周星期几",data:"w",text:"每周星期几"},{name:"每月第几日",data:"m",text:"每月第几日"}]}},methods:{handleRangeMouseDown(){},saveNode(){this.$emit("saveNode",{id:this.id,data:{...this.nodeData,label:this.label}})},saveLabel(){this.saveNode()},checkFold(){this.isFold=!this.isFold,this.resetHandleTop()},checkFoldOutputs(){this.isFold_outputs=!this.isFold_outputs},checkFoldTimeTrigger(){this.isFold_TimeTrigger=!this.isFold_TimeTrigger,this.resetHandleTop()},checkFoldPrompt(){this.isFold_prompt=!this.isFold_prompt}}};var sn=Object.assign(an,{setup(e){return(l,o)=>{const s=(0,n.g2)("el-option"),u=(0,n.g2)("el-select"),c=(0,n.g2)("el-form-item"),p=(0,n.g2)("el-input"),r=(0,n.g2)("el-date-picker"),k=(0,n.g2)("el-form");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)((0,i.R1)(d.h7),{class:"Handle",type:"source",position:(0,i.R1)(d.yX).Right,style:{}},null,8,["position"]),(0,n.Lk)("div",{class:(0,a.C4)(["NodeBox TimeTriggerNode iconfont",[e.isSelected?"Selected":"",""]])},[(0,n.Lk)("div",Ot,[(0,n.Lk)("span",{class:(0,a.C4)(["Icon fold",[l.isFold?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:o[0]||(o[0]=(...e)=>l.checkFold&&l.checkFold(...e))},null,2),Bt,At,(0,n.bo)((0,n.Lk)("input",{class:"label","onUpdate:modelValue":o[1]||(o[1]=e=>l.label=e),value:"{{label}}",placeholder:"备注",onBlur:o[2]||(o[2]=(...e)=>l.saveLabel&&l.saveLabel(...e))},null,544),[[t.Jo,l.label]])]),l.isFold?((0,n.uX)(),(0,n.CE)("div",Qt,[Pt,(0,n.Lk)("div",Kt,[(0,n.Lk)("div",qt,[(0,n.Lk)("span",{class:(0,a.C4)(["Icon fold",[l.isFold_TimeTrigger?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:o[3]||(o[3]=(...e)=>l.checkFoldTimeTrigger&&l.checkFoldTimeTrigger(...e))},null,2),Wt]),l.isFold_TimeTrigger?((0,n.uX)(),(0,n.CE)("div",Jt,[(0,n.bF)(k,{"label-width":"auto",style:{"max-width":"600px"},"status-icon":""},{default:(0,n.k6)((()=>[(0,n.bF)(c,{label:"循环类型"},{default:(0,n.k6)((()=>[(0,n.bF)(u,{modelValue:l.nodeData.timeTrigger.loopType,"onUpdate:modelValue":o[4]||(o[4]=e=>l.nodeData.timeTrigger.loopType=e),placeholder:"循环类型"},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.loopType,(e=>((0,n.uX)(),(0,n.Wv)(s,{key:e.name,value:e.data,label:e.text},null,8,["value","label"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,n.bF)(c,{label:"周期"},{default:(0,n.k6)((()=>[(0,n.bF)(p,{modelValue:l.nodeData.timeTrigger.IntervalValue,"onUpdate:modelValue":o[5]||(o[5]=e=>l.nodeData.timeTrigger.IntervalValue=e),type:"number",placeholder:"循环类型N的值"},null,8,["modelValue"])])),_:1}),(0,n.bF)(c,{label:"第一次开始时间",title:"循环类型为日、周、月时该值的时间'hh:mm'为每次循环的开始时间"},{default:(0,n.k6)((()=>[(0,n.bF)(r,{modelValue:l.nodeData.timeTrigger.StartTime,"onUpdate:modelValue":o[6]||(o[6]=e=>l.nodeData.timeTrigger.StartTime=e),type:"datetime",placeholder:"选择","default-time":l.defaultTime},null,8,["modelValue","default-time"])])),_:1}),(0,n.bF)(c,{label:"执行次数"},{default:(0,n.k6)((()=>[(0,n.bF)(p,{modelValue:l.nodeData.timeTrigger.RepeatValue,"onUpdate:modelValue":o[7]||(o[7]=e=>l.nodeData.timeTrigger.RepeatValue=e),type:"number",placeholder:"0等于无限次"},null,8,["modelValue"])])),_:1})])),_:1})])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",$t,[(0,n.Lk)("div",Ht,[(0,n.Lk)("span",{class:(0,a.C4)(["Icon fold",[l.isFold_prompt?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:o[8]||(o[8]=(...e)=>l.checkFoldPrompt&&l.checkFoldPrompt(...e))},null,2),Zt]),l.isFold_prompt?((0,n.uX)(),(0,n.CE)("div",zt,[(0,n.bo)((0,n.Lk)("textarea",{"onUpdate:modelValue":o[9]||(o[9]=e=>l.nodeData.prompt=e),onMousedown:o[10]||(o[10]=(0,t.D$)(((...e)=>l.handleRangeMouseDown&&l.handleRangeMouseDown(...e)),["stop"])),onWheel:o[11]||(o[11]=(0,t.D$)(((...e)=>l.handleRangeMouseDown&&l.handleRangeMouseDown(...e)),["stop"])),placeholder:["请输入提示词：{{currentTime}}"]},null,544),[[t.Jo,l.nodeData.prompt]])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",Yt,[(0,n.Lk)("div",Gt,[(0,n.Lk)("span",{class:(0,a.C4)(["Icon fold",[l.isFold_outputs?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:o[12]||(o[12]=(...e)=>l.checkFoldOutputs&&l.checkFoldOutputs(...e))},null,2),en]),l.isFold_outputs?((0,n.uX)(),(0,n.CE)("div",ln,[(0,n.Lk)("table",null,[on,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.nodeData.output,((e,l)=>((0,n.uX)(),(0,n.CE)("tr",{key:l},[(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":l=>e.varname=l},null,8,tn),[[t.Jo,e.varname]])]),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":l=>e.txt=l},null,8,nn),[[t.Jo,e.txt]])])])))),128))])])])):(0,n.Q3)("",!0)])])):(0,n.Q3)("",!0)],2)],64)}}});const dn=sn;var un=dn;const cn={class:"Title"},pn=(0,n.Lk)("span",{class:"Icon ticon icon-Agent"},null,-1),rn=(0,n.Lk)("span",null,"Agent",-1),kn={key:0,class:"Content"},hn=(0,n.Lk)("div",{class:"Description"},"调用Agent可以实现更多复杂组合",-1),mn={class:"Agent Content"},gn={class:"Title"},Fn=(0,n.Lk)("span",null,"Agent",-1),Ln={key:0},vn=["value"],bn={class:"Prompt Content"},Cn={class:"Title"},fn=(0,n.Lk)("span",null,"Agent说明(让主控AI更好的理解Agent的作用，并合理安排触发任务)",-1),_n={key:0},yn=["placeholder"],wn={class:"Inputs Content"},Dn={class:"Title"},In=(0,n.Lk)("span",null,"输入",-1),Nn={key:0},Vn=(0,n.Lk)("thead",null,[(0,n.Lk)("th",null,"变量名"),(0,n.Lk)("th",null,"描述")],-1),Tn=["onUpdate:modelValue"],Mn=["onUpdate:modelValue"],xn={class:"Outputs Content"},jn={class:"Title"},En=(0,n.Lk)("span",null,"输出",-1),Xn={key:0},Sn=(0,n.Lk)("thead",null,[(0,n.Lk)("th",null,"变量名"),(0,n.Lk)("th",null,"描述")],-1),Un=["onUpdate:modelValue"],Rn=["onUpdate:modelValue"],On={name:"AgentNode",props:{id:String,isSelected:Boolean,data:Object,agents:Object},data(){return{label:this.data.label,nodeData:this.data,agentList:this.agents,isFold:!0,isFold_inputs:!0,isFold_outputs:!0,isFold_Agent:!0,isFold_prompt:!0}},methods:{handleRangeMouseDown(){},saveNode(){this.$emit("saveNode",{id:this.id,data:{...this.nodeData,label:this.label}})},saveLabel(){this.saveNode()},checkFold(){this.isFold=!this.isFold},checkFoldInputs(){this.isFold_inputs=!this.isFold_inputs},checkFoldOutputs(){this.isFold_outputs=!this.isFold_outputs},checkFoldAgent(){this.isFold_Agent=!this.isFold_Agent},checkFoldPrompt(){this.isFold_prompt=!this.isFold_prompt}}};var Bn=Object.assign(On,{setup(e){return(l,o)=>((0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)((0,i.R1)(d.h7),{class:"Handle",type:"target",position:(0,i.R1)(d.yX).Left,style:{}},null,8,["position"]),(0,n.bF)((0,i.R1)(d.h7),{class:"Handle",type:"source",position:(0,i.R1)(d.yX).Right,style:{}},null,8,["position"]),(0,n.Lk)("div",{class:(0,a.C4)(["NodeBox Agent iconfont",[e.isSelected?"Selected":"",""]])},[(0,n.Lk)("div",cn,[(0,n.Lk)("span",{class:(0,a.C4)(["Icon fold",[l.isFold?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:o[0]||(o[0]=(...e)=>l.checkFold&&l.checkFold(...e))},null,2),pn,rn,(0,n.bo)((0,n.Lk)("input",{class:"label","onUpdate:modelValue":o[1]||(o[1]=e=>l.label=e),value:"{{label}}",placeholder:"备注",onBlur:o[2]||(o[2]=(...e)=>l.saveLabel&&l.saveLabel(...e))},null,544),[[t.Jo,l.label]])]),l.isFold?((0,n.uX)(),(0,n.CE)("div",kn,[hn,(0,n.Lk)("div",mn,[(0,n.Lk)("div",gn,[(0,n.Lk)("span",{class:(0,a.C4)(["Icon fold",[l.isFold_Agent?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:o[3]||(o[3]=(...e)=>l.checkFoldAgent&&l.checkFoldAgent(...e))},null,2),Fn]),l.isFold_Agent?((0,n.uX)(),(0,n.CE)("div",Ln,[(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":o[4]||(o[4]=e=>l.nodeData.agent.AgentID=e)},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.agentList,((e,l)=>((0,n.uX)(),(0,n.CE)("option",{key:l,value:e.AgentID},(0,a.v_)(e.Name),9,vn)))),128))],512),[[t.u1,l.nodeData.agent.AgentID]])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",bn,[(0,n.Lk)("div",Cn,[(0,n.Lk)("span",{class:(0,a.C4)(["Icon fold",[l.isFold_prompt?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:o[5]||(o[5]=(...e)=>l.checkFoldPrompt&&l.checkFoldPrompt(...e))},null,2),fn]),l.isFold_prompt?((0,n.uX)(),(0,n.CE)("div",_n,[(0,n.bo)((0,n.Lk)("textarea",{"onUpdate:modelValue":o[6]||(o[6]=e=>l.nodeData.prompt=e),onMousedown:o[7]||(o[7]=(0,t.D$)(((...e)=>l.handleRangeMouseDown&&l.handleRangeMouseDown(...e)),["stop"])),onWheel:o[8]||(o[8]=(0,t.D$)(((...e)=>l.handleRangeMouseDown&&l.handleRangeMouseDown(...e)),["stop"])),placeholder:["请输入Agent说明：输入参数:"+l.nodeData.inputs.map((e=>"{{"+e.varname+"}}")).join(","),"输出参数:"+l.nodeData.output.map((e=>"{{"+e.varname+"}}")).join(",")]},null,40,yn),[[t.Jo,l.nodeData.prompt]])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",wn,[(0,n.Lk)("div",Dn,[(0,n.Lk)("span",{class:(0,a.C4)(["Icon fold",[l.isFold_inputs?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:o[9]||(o[9]=(...e)=>l.checkFoldInputs&&l.checkFoldInputs(...e))},null,2),In]),l.isFold_inputs?((0,n.uX)(),(0,n.CE)("div",Nn,[(0,n.Lk)("table",null,[Vn,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.nodeData.inputs,((e,l)=>((0,n.uX)(),(0,n.CE)("tr",{key:l},[(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":l=>e.varname=l},null,8,Tn),[[t.Jo,e.varname]])]),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":l=>e.txt=l,placeholder:"input的txt等于上一节点output的varname"},null,8,Mn),[[t.Jo,e.txt]])])])))),128))])])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",xn,[(0,n.Lk)("div",jn,[(0,n.Lk)("span",{class:(0,a.C4)(["Icon fold",[l.isFold_outputs?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:o[10]||(o[10]=(...e)=>l.checkFoldOutputs&&l.checkFoldOutputs(...e))},null,2),En]),l.isFold_outputs?((0,n.uX)(),(0,n.CE)("div",Xn,[(0,n.Lk)("table",null,[Sn,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.nodeData.output,((e,l)=>((0,n.uX)(),(0,n.CE)("tr",{key:l},[(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":l=>e.varname=l},null,8,Un),[[t.Jo,e.varname]])]),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":l=>e.txt=l},null,8,Rn),[[t.Jo,e.txt]])])])))),128))])])])):(0,n.Q3)("",!0)])])):(0,n.Q3)("",!0)],2)],64))}});const An=Bn;var Qn=An;const Pn={class:"Title"},Kn=(0,n.Lk)("span",{class:"Icon ticon icon-MainAI"},null,-1),qn=(0,n.Lk)("span",null,"主控AI",-1),Wn={key:0,class:"Content"},Jn=(0,n.Lk)("div",{class:"Description"},"主导应用的核心AI，可以调用多个Agent",-1),$n={class:"LargeModel Content"},Hn={class:"Title"},Zn=(0,n.Lk)("span",null,"模型",-1),zn={key:0},Yn=["value"],Gn={class:"Inputs Content"},ea={class:"Title"},la=(0,n.Lk)("span",null,"提示词函数(插件)",-1),oa={key:0},ta={class:"Plugins Content"},na={class:"Title"},aa=(0,n.Lk)("span",null,"原生函数(插件)",-1),sa={key:0},ia={class:"Inputs Content"},da={class:"Title"},ua=(0,n.Lk)("span",null,"输入",-1),ca={key:0},pa=(0,n.Lk)("thead",null,[(0,n.Lk)("th",null,"变量名"),(0,n.Lk)("th",null,"描述")],-1),ra=["onUpdate:modelValue"],ka=["onUpdate:modelValue"],ha={class:"Prompt Content"},ma={class:"Title"},ga=(0,n.Lk)("span",null,"提示词（将输入变量与提示词整理，并让AI重新生成返回结果）",-1),Fa={key:0},La=["placeholder"],va={class:"Coefficient Content"},ba={class:"Title"},Ca=(0,n.Lk)("span",null,"系数设置",-1),fa={key:0},_a={class:"Outputs Content"},ya={class:"Title"},wa=(0,n.Lk)("span",null,"输出",-1),Da={key:0},Ia=(0,n.Lk)("thead",null,[(0,n.Lk)("th",null,"变量名"),(0,n.Lk)("th",null,"描述")],-1),Na=["onUpdate:modelValue"],Va=["onUpdate:modelValue"],Ta={name:"MainAINode",props:{id:String,isSelected:Boolean,data:Object,largeModel:Object,plugins:Object},components:{Multiselect:he.Ay,SliderInput:be},data(){return{label:this.data.label,nodeData:this.data,largeModelList:this.largeModel,pluginsList:this.plugins,isFold:!0,isFold_inputs:!0,isFold_outputs:!0,isFold_prompt:!0,isFold_mainAI:!0,isFold_plugins:!0,isFold_plugins2:!0,isFold_Coefficient:!0}},methods:{handleRangeMouseDown(){},saveNode(){this.$emit("saveNode",{id:this.id,data:{...this.nodeData,label:this.label}})},saveLabel(){this.saveNode()},checkFold(){this.isFold=!this.isFold},checkFoldInputs(){this.isFold_inputs=!this.isFold_inputs},checkFoldOutputs(){this.isFold_outputs=!this.isFold_outputs},checkFoldPrompt(){this.isFold_prompt=!this.isFold_prompt},checkFoldMainAI(){this.isFold_mainAI=!this.isFold_mainAI},checkFoldPlugins(){this.isFold_plugins=!this.isFold_plugins},checkFoldPlugins2(){this.isFold_plugins2=!this.isFold_plugins2},checkCoefficient(){this.isFold_Coefficient=!this.isFold_Coefficient}}};var Ma=Object.assign(Ta,{setup(e){return(l,o)=>{const s=(0,n.g2)("el-form-item"),u=(0,n.g2)("el-form");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)((0,i.R1)(d.h7),{class:"Handle",type:"target",position:(0,i.R1)(d.yX).Left,style:{}},null,8,["position"]),(0,n.bF)((0,i.R1)(d.h7),{class:"Handle",type:"source",position:(0,i.R1)(d.yX).Right,style:{}},null,8,["position"]),(0,n.Lk)("div",{class:(0,a.C4)(["NodeBox MainAINode iconfont",[e.isSelected?"Selected":"",""]])},[(0,n.Lk)("div",Pn,[(0,n.Lk)("span",{class:(0,a.C4)(["Icon fold",[l.isFold?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:o[0]||(o[0]=(...e)=>l.checkFold&&l.checkFold(...e))},null,2),Kn,qn,(0,n.bo)((0,n.Lk)("input",{class:"label","onUpdate:modelValue":o[1]||(o[1]=e=>l.label=e),value:"{{label}}",placeholder:"备注",onBlur:o[2]||(o[2]=(...e)=>l.saveLabel&&l.saveLabel(...e))},null,544),[[t.Jo,l.label]])]),l.isFold?((0,n.uX)(),(0,n.CE)("div",Wn,[Jn,(0,n.Lk)("div",$n,[(0,n.Lk)("div",Hn,[(0,n.Lk)("span",{class:(0,a.C4)(["Icon fold",[l.isFold_mainAI?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:o[3]||(o[3]=(...e)=>l.checkFoldMainAI&&l.checkFoldMainAI(...e))},null,2),Zn]),l.isFold_mainAI?((0,n.uX)(),(0,n.CE)("div",zn,[(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":o[4]||(o[4]=e=>l.nodeData.model.LargeModelID=e)},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.largeModelList,((e,l)=>((0,n.uX)(),(0,n.CE)("option",{key:l,value:e.LargeModelID},(0,a.v_)(e.ModelOrganizationName)+"("+(0,a.v_)(e.Name)+") ",9,Yn)))),128))],512),[[t.u1,l.nodeData.model.LargeModelID]])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",Gn,[(0,n.Lk)("div",ea,[(0,n.Lk)("span",{class:(0,a.C4)(["Icon fold",[l.isFold_plugins?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:o[5]||(o[5]=(...e)=>l.checkFoldPlugins&&l.checkFoldPlugins(...e))},null,2),la]),l.isFold_plugins?((0,n.uX)(),(0,n.CE)("div",oa,[(0,n.bF)((0,i.R1)(he.Ay),{modelValue:l.nodeData.SemanticFunction,"onUpdate:modelValue":o[6]||(o[6]=e=>l.nodeData.SemanticFunction=e),placeholder:"请选择函数",multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,label:"Name","track-by":"Name",taggable:"true",options:l.pluginsList.filter((e=>1==e.PluginsType))},null,8,["modelValue","options"])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",ta,[(0,n.Lk)("div",na,[(0,n.Lk)("span",{class:(0,a.C4)(["Icon fold",[l.isFold_plugins2?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:o[7]||(o[7]=(...e)=>l.checkFoldPlugins2&&l.checkFoldPlugins2(...e))},null,2),aa]),l.isFold_plugins2?((0,n.uX)(),(0,n.CE)("div",sa,[(0,n.bF)((0,i.R1)(he.Ay),{modelValue:l.nodeData.NativeFunction,"onUpdate:modelValue":o[8]||(o[8]=e=>l.nodeData.NativeFunction=e),placeholder:"请选择函数",multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,label:"Name","track-by":"Name",taggable:"true",options:l.pluginsList.filter((e=>2==e.PluginsType))},null,8,["modelValue","options"])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",ia,[(0,n.Lk)("div",da,[(0,n.Lk)("span",{class:(0,a.C4)(["Icon fold",[l.isFold_inputs?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:o[9]||(o[9]=(...e)=>l.checkFoldInputs&&l.checkFoldInputs(...e))},null,2),ua]),l.isFold_inputs?((0,n.uX)(),(0,n.CE)("div",ca,[(0,n.Lk)("table",null,[pa,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.nodeData.inputs,((e,l)=>((0,n.uX)(),(0,n.CE)("tr",{key:l},[(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":l=>e.varname=l},null,8,ra),[[t.Jo,e.varname]])]),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":l=>e.txt=l},null,8,ka),[[t.Jo,e.txt]])])])))),128))])])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",ha,[(0,n.Lk)("div",ma,[(0,n.Lk)("span",{class:(0,a.C4)(["Icon fold",[l.isFold_prompt?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:o[10]||(o[10]=(...e)=>l.checkFoldPrompt&&l.checkFoldPrompt(...e))},null,2),ga]),l.isFold_prompt?((0,n.uX)(),(0,n.CE)("div",Fa,[(0,n.bo)((0,n.Lk)("textarea",{"onUpdate:modelValue":o[11]||(o[11]=e=>l.nodeData.prompt=e),onMousedown:o[12]||(o[12]=(0,t.D$)(((...e)=>l.handleRangeMouseDown&&l.handleRangeMouseDown(...e)),["stop"])),onWheel:o[13]||(o[13]=(0,t.D$)(((...e)=>l.handleRangeMouseDown&&l.handleRangeMouseDown(...e)),["stop"])),placeholder:["请输入提示词："+l.nodeData.inputs.map((e=>"{{"+e.varname+"}}")).join(",")]},null,40,La),[[t.Jo,l.nodeData.prompt]])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",va,[(0,n.Lk)("div",ba,[(0,n.Lk)("span",{class:(0,a.C4)(["Icon fold",[l.isFold_Coefficient?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:o[14]||(o[14]=(...e)=>l.checkCoefficient&&l.checkCoefficient(...e))},null,2),Ca]),l.isFold_Coefficient?((0,n.uX)(),(0,n.CE)("div",fa,[(0,n.bF)(u,{"label-width":"auto",style:{"max-width":"600px"},"status-icon":""},{default:(0,n.k6)((()=>[(0,n.bF)(s,{label:"随机性(值越大越有创造力)"},{default:(0,n.k6)((()=>[(0,n.bF)(be,{modelValue:l.nodeData.temperature,"onUpdate:modelValue":o[15]||(o[15]=e=>l.nodeData.temperature=e),min:"0",max:"100"},null,8,["modelValue"])])),_:1}),(0,n.bF)(s,{label:"多样性(值越大越有多样性)"},{default:(0,n.k6)((()=>[(0,n.bF)(be,{modelValue:l.nodeData.topp,"onUpdate:modelValue":o[16]||(o[16]=e=>l.nodeData.topp=e),min:"0",max:"100"},null,8,["modelValue"])])),_:1})])),_:1})])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",_a,[(0,n.Lk)("div",ya,[(0,n.Lk)("span",{class:(0,a.C4)(["Icon fold",[l.isFold_outputs?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:o[17]||(o[17]=(...e)=>l.checkFoldOutputs&&l.checkFoldOutputs(...e))},null,2),wa]),l.isFold_outputs?((0,n.uX)(),(0,n.CE)("div",Da,[(0,n.Lk)("table",null,[Ia,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.nodeData.output,((e,l)=>((0,n.uX)(),(0,n.CE)("tr",{key:l},[(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":l=>e.varname=l},null,8,Na),[[t.Jo,e.varname]])]),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":l=>e.txt=l},null,8,Va),[[t.Jo,e.txt]])])])))),128))])])])):(0,n.Q3)("",!0)])])):(0,n.Q3)("",!0)],2)],64)}}});const xa=Ma;var ja=xa,Ea=o(7477);const Xa={class:"Title"},Sa=(0,n.Lk)("span",{class:"Icon ticon icon-Reporter"},null,-1),Ua=(0,n.Lk)("span",null,"记录员",-1),Ra={key:0,class:"Content"},Oa=(0,n.Lk)("div",{class:"Description"}," 调用大语言模型，记录会话内容，并进行必要的摘要与整理，减少回话上下文长度，提高会话质量 ",-1),Ba={class:"LargeModel Content"},Aa={class:"Title"},Qa=(0,n.Lk)("span",null,"模型",-1),Pa={key:0},Ka=["value"],qa={class:"Prompt Content"},Wa={class:"Title"},Ja=(0,n.Lk)("span",null,"提示词（将输入变量与提示词整理，并让AI重新生成返回结果）",-1),$a={key:0},Ha=["placeholder"],Za={class:"Coefficient Content"},za={class:"Title"},Ya=(0,n.Lk)("span",null,"系数设置",-1),Ga={key:0},es={name:"ReporterNode",props:{id:String,isSelected:Boolean,data:Object,largeModel:Object},components:{SliderInput:be},data(){return{label:this.data.label,nodeData:this.data,largeModelList:this.largeModel,isFold:!0,isFold_inputs:!0,isFold_outputs:!0,isFold_prompt:!0,isFold_largemodel:!0,isFold_Coefficient:!0}},methods:{handleRangeMouseDown(){},saveNode(){this.$emit("saveNode",{id:this.id,data:{...this.nodeData,label:this.label}})},saveLabel(){this.saveNode()},checkFold(){this.isFold=!this.isFold},checkFoldInputs(){this.isFold_inputs=!this.isFold_inputs},checkFoldOutputs(){this.isFold_outputs=!this.isFold_outputs},checkFoldPrompt(){this.isFold_prompt=!this.isFold_prompt},checkFoldLargeModel(){this.isFold_largemodel=!this.isFold_largemodel},checkCoefficient(){this.isFold_Coefficient=!this.isFold_Coefficient}}};var ls=Object.assign(es,{setup(e){return(l,o)=>{const s=(0,n.g2)("el-switch"),d=(0,n.g2)("el-form-item"),u=(0,n.g2)("el-form");return(0,n.uX)(),(0,n.CE)("div",{class:(0,a.C4)(["NodeBox ReporterNode iconfont",[e.isSelected?"Selected":"",""]])},[(0,n.Lk)("div",Xa,[(0,n.Lk)("span",{class:(0,a.C4)(["Icon fold",[l.isFold?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:o[0]||(o[0]=(...e)=>l.checkFold&&l.checkFold(...e))},null,2),Sa,Ua,(0,n.bo)((0,n.Lk)("input",{class:"label","onUpdate:modelValue":o[1]||(o[1]=e=>l.label=e),value:"{{label}}",placeholder:"备注",onBlur:o[2]||(o[2]=(...e)=>l.saveLabel&&l.saveLabel(...e))},null,544),[[t.Jo,l.label]])]),l.isFold?((0,n.uX)(),(0,n.CE)("div",Ra,[Oa,(0,n.Lk)("div",Ba,[(0,n.Lk)("div",Aa,[(0,n.Lk)("span",{class:(0,a.C4)(["Icon fold",[l.isFold_largemodel?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:o[3]||(o[3]=(...e)=>l.checkFoldLargeModel&&l.checkFoldLargeModel(...e))},null,2),Qa]),l.isFold_largemodel?((0,n.uX)(),(0,n.CE)("div",Pa,[(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":o[4]||(o[4]=e=>l.nodeData.model.LargeModelID=e)},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.largeModelList,((e,l)=>((0,n.uX)(),(0,n.CE)("option",{key:l,value:e.LargeModelID},(0,a.v_)(e.ModelOrganizationName)+"("+(0,a.v_)(e.Name)+") ",9,Ka)))),128))],512),[[t.u1,l.nodeData.model.LargeModelID]])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",qa,[(0,n.Lk)("div",Wa,[(0,n.Lk)("span",{class:(0,a.C4)(["Icon fold",[l.isFold_prompt?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:o[5]||(o[5]=(...e)=>l.checkFoldPrompt&&l.checkFoldPrompt(...e))},null,2),Ja]),l.isFold_prompt?((0,n.uX)(),(0,n.CE)("div",$a,[(0,n.bo)((0,n.Lk)("textarea",{"onUpdate:modelValue":o[6]||(o[6]=e=>l.nodeData.prompt=e),onMousedown:o[7]||(o[7]=(0,t.D$)(((...e)=>l.handleRangeMouseDown&&l.handleRangeMouseDown(...e)),["stop"])),onWheel:o[8]||(o[8]=(0,t.D$)(((...e)=>l.handleRangeMouseDown&&l.handleRangeMouseDown(...e)),["stop"])),placeholder:["请输入提示词："+l.nodeData.inputs.map((e=>"{{"+e.varname+"}}")).join(",")]},null,40,Ha),[[t.Jo,l.nodeData.prompt]])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",Za,[(0,n.Lk)("div",za,[(0,n.Lk)("span",{class:(0,a.C4)(["Icon fold",[l.isFold_Coefficient?"icon-jiantou-d":"icon-jiantou-r"]]),onClick:o[9]||(o[9]=(...e)=>l.checkCoefficient&&l.checkCoefficient(...e))},null,2),Ya]),l.isFold_Coefficient?((0,n.uX)(),(0,n.CE)("div",Ga,[(0,n.bF)(u,{"label-width":"auto",style:{"max-width":"600px"},"status-icon":""},{default:(0,n.k6)((()=>[(0,n.bF)(d,{label:"是否启用"},{default:(0,n.k6)((()=>[(0,n.bF)(s,{modelValue:l.nodeData.enable,"onUpdate:modelValue":o[10]||(o[10]=e=>l.nodeData.enable=e),class:"mt-2",style:{"margin-left":"10px"},"inline-prompt":"","active-icon":(0,i.R1)(Ea.Jlk),"inactive-icon":(0,i.R1)(Ea.bm)},null,8,["modelValue","active-icon","inactive-icon"])])),_:1}),(0,n.bF)(d,{label:"随机性(值越大越有创造力)"},{default:(0,n.k6)((()=>[(0,n.bF)(be,{modelValue:l.nodeData.temperature,"onUpdate:modelValue":o[11]||(o[11]=e=>l.nodeData.temperature=e),min:"0",max:"100"},null,8,["modelValue"])])),_:1}),(0,n.bF)(d,{label:"多样性(值越大越有多样性)"},{default:(0,n.k6)((()=>[(0,n.bF)(be,{modelValue:l.nodeData.topp,"onUpdate:modelValue":o[12]||(o[12]=e=>l.nodeData.topp=e),min:"0",max:"100"},null,8,["modelValue"])])),_:1}),(0,n.bF)(d,{label:"每次总结记录数(会话条数)"},{default:(0,n.k6)((()=>[(0,n.bF)(be,{modelValue:l.nodeData.recordslength,"onUpdate:modelValue":o[13]||(o[13]=e=>l.nodeData.recordslength=e),min:"0",max:"100"},null,8,["modelValue"])])),_:1})])),_:1})])):(0,n.Q3)("",!0)])])):(0,n.Q3)("",!0)],2)}}});const os=ls;var ts=os;const ns=["cx","cy"],as=["d"],ss=["transform","d"],is={inheritAttrs:!1};var ds=Object.assign(is,{__name:"CustomEdge",props:{id:{type:String,required:!0},sourceX:{type:Number,required:!0},sourceY:{type:Number,required:!0},targetX:{type:Number,required:!0},targetY:{type:Number,required:!0},sourcePosition:{type:String,required:!0},targetPosition:{type:String,required:!0},data:{type:Object,required:!1},markerEnd:{type:String,required:!1},style:{type:Object,required:!1}},setup(e){const l=e,o=(0,n.EW)((()=>(0,d.Fp)(l)));return(t,s)=>((0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)((0,i.R1)(d.tE),{id:e.id,style:(0,a.Tr)(e.style),path:o.value[0],"marker-end":e.markerEnd,label:e.data.text,"label-x":o.value[1],"label-y":o.value[2],"label-style":{fill:"white"},"label-show-bg":!0,"label-bg-style":{fill:"red"},"label-bg-padding":[2,4],"label-bg-border-radius":2},null,8,["id","style","path","marker-end","label","label-x","label-y"]),(0,n.Lk)("g",null,[(0,n.Lk)("circle",{cx:l.sourceX,cy:l.sourceY,r:"4",fill:"#29a3ff"},null,8,ns),(0,n.Lk)("path",{d:o.value,fill:"none",stroke:"#29a3ff","stroke-width":"2"},null,8,as),(0,n.Lk)("path",{transform:t.transform,d:`M ${e.targetX} ${e.targetY+2} L ${e.targetX-5} ${e.targetY-10} L ${e.targetX+5} ${e.targetY-10} Z`,fill:"#3e47de",stroke:"none"},null,8,ss)])],64))}});const us=ds;var cs=us,ps=null,rs={name:"WorkFlow",props:{workflow_data:{title:"智能助理",info:null,WorkFlowID:"",MainID:"",MainType:2}},components:{VueFlow:d.nO,Background:u.V,MiniMap:p.of,ToolBox:ee,WorkFlowInfo:ie,Controls:c.H,ToolIcon:Q,ControlButton:c.a,WorkFlowData:ke,LargeModelNode:pl,PluginsNode:Ol,StartNode:ho,EndNode:Xo,SelectorNode:pt,TimeTrigger:un,AgentNode:Qn,MainAINode:ja,ReporterNode:ts,CustomEdge:cs,KnowledgeBaseNode:Rt},setup(){const{onInit:e,onNodeDragStop:l,onConnect:o,addEdges:t,setViewport:n,toObject:a,onNodesChange:s,applyNodeChanges:u,onEdgesChange:c,applyEdgeChanges:p}=(0,d.Id)();e((e=>{e.fitView()})),l((()=>{ps.nodes=a().nodes})),o((e=>{e.id=L.guid(),e.markerEnd=d.TG.ArrowClosed,e.style="stroke-width: 3;stroke:#3e47de;",t(e),ps.edges=a().edges})),s((e=>{const l=[];for(const t of e)if("remove"===t.type){var o=ps.nodes.filter((e=>e.id===t.id));if(o.length>0){if("Start"===o[0].type){(0,Z.me)({type:"warn",title:"开始节点不能删除"});continue}if("End"===o[0].type){(0,Z.me)({type:"warn",title:"结束节点不能删除"});continue}if("MainAI"===o[0].type){(0,Z.me)({type:"warn",title:"应用用主控AI不能删除"});continue}if("Reporter"===o[0].type){(0,Z.me)({type:"warn",title:"应用记录员不能删除"});continue}l.push(t)}}else l.push(t);u(l)})),c((e=>{const l=[];for(const o of e)if("remove"===o.type){if(ps.selectedNode)continue;l.push(o)}else l.push(o);p(l)}));const r=(0,i.KR)(n),k=(0,i.KR)(a);return{_setViewport:r,_toObject:k}},mounted(){let e=this;this.init(),this.startInterval(),ps=e},unmount(){this.stopInterval()},data(){return{ShowNodeBox:!1,workflow:{title:this.workflow_data.title,info:this.workflow_data.info},info:{},pluginsList:[],largeModelList:[],knowledgeBaseList:[],agentList:[],nodes:[],edges:[],dark:(0,i.KR)(!1),selectedNode:null,selectEdge:null,connectionLineStyle:{stroke:"#ddd",strokeWidth:3},intervalId:null}},methods:{logToObject(){this.save()},resetTransform(){this._setViewport({x:0,y:0,zoom:1})},onShowNodeBox(){this.ShowNodeBox=!this.ShowNodeBox},toggleDarkMode(){this.dark=!this.dark},addNode(e){console.log(e),this.nodes.push(e)},saveNode(e){this.nodes=this.nodes.map((l=>(l.id==e.id&&(l.data=e.data),l)))},nodeClick(e){this.selectedNode=e,this.selectEdge=null},edgeClick(e){this.selectedNode=null,this.selectEdge=e},startInterval(){this.intervalId=setInterval(this.save,5e3)},stopInterval(){this.intervalId&&clearInterval(this.intervalId)},async init(){m.getBaseConfig().then((e=>{if(console.log(e),e.Status){var l=e.Data;this.largeModelList=(0,i.KR)(l.largeModelList),this.pluginsList=l.pluginsList,this.agentList=l.agentList,this.knowledgeBaseList=l.knowledgeBaseList}this.getWorkFlow()})).catch((e=>{console.log(e)}))},getWorkFlow(){var e=this;m.getWorkFlow(e.workflow_data.WorkFlowID,e.workflow_data.MainID,e.workflow_data.MainType).then((e=>{if(e.Status){var l=e.Data;this.info=Object.assign({},this.info,l.Info),l.Nodes.map((e=>{this.nodes.push(e.Config)})),l.Edges.map((e=>{this.edges.push(e.Config)})),this.$forceUpdate()}})).catch((e=>{console.log(e)}))},save(e=null){var l=this,o=l.workflow_data.WorkFlowID,t=l.info;null!=e&&(t.WorkflowName=e.WorkflowName,t.Description=e.Description);var n=this._toObject().nodes.map((e=>({NodeID:e.id,WorkFlowID:o,NodeType:e.type,NodeName:e.data.label,Description:e.data.label,Config:e}))),a=this._toObject().edges.map((e=>({EdgeID:e.id,WorkFlowID:o,SourceNodeId:e.source,TargetNodeId:e.target,Condition:"",LName:"",Config:e}))),s={Info:t,Nodes:n,Edges:a,WorkFlowID:o,MainID:l.workflow_data.MainID,MainType:l.workflow_data.MainType};m.subWorkFlow(s).then((e=>{console.log(e),e.Status&&(l.workflow_data.WorkFlowID=e.Data,l.info.LastUpdateTime=(new Date).toLocaleString())})).catch((e=>{console.log(e)}))}}};const ks=(0,Y.A)(rs,[["render",s]]);var hs=ks;const ms={name:"App",components:{WorkFlow:hs},created(){this.parseUrlParams()},methods:{parseUrlParams(){const e=new URLSearchParams(window.location.search);this.workflow_data.WorkFlowID=e.get("WorkFlowID"),this.workflow_data.MainID=e.get("MainID"),this.workflow_data.MainType=e.get("MainType")}},data(){return{workflow_data:{title:"工作流",info:null,WorkFlowID:"",MainID:"",MainType:2}}}};var gs=Object.assign(ms,{setup(e){return(e,l)=>{const o=(0,n.g2)("notifications");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)(hs,{workflow_data:e.workflow_data},null,8,["workflow_data"]),(0,n.bF)(o)],64)}}});const Fs=gs;var Ls=Fs,vs=o(4651);o(4188);const bs=(0,t.Ef)(Ls);bs.use(vs.A),bs.use(Z.Ay),bs.mount("#app")}},l={};function o(t){var n=l[t];if(void 0!==n)return n.exports;var a=l[t]={exports:{}};return e[t].call(a.exports,a,a.exports,o),a.exports}o.m=e,function(){var e=[];o.O=function(l,t,n,a){if(!t){var s=1/0;for(c=0;c<e.length;c++){t=e[c][0],n=e[c][1],a=e[c][2];for(var i=!0,d=0;d<t.length;d++)(!1&a||s>=a)&&Object.keys(o.O).every((function(e){return o.O[e](t[d])}))?t.splice(d--,1):(i=!1,a<s&&(s=a));if(i){e.splice(c--,1);var u=n();void 0!==u&&(l=u)}}return l}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[t,n,a]}}(),function(){o.n=function(e){var l=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(l,{a:l}),l}}(),function(){o.d=function(e,l){for(var t in l)o.o(l,t)&&!o.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:l[t]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,l){return Object.prototype.hasOwnProperty.call(e,l)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};o.O.j=function(l){return 0===e[l]};var l=function(l,t){var n,a,s=t[0],i=t[1],d=t[2],u=0;if(s.some((function(l){return 0!==e[l]}))){for(n in i)o.o(i,n)&&(o.m[n]=i[n]);if(d)var c=d(o)}for(l&&l(t);u<s.length;u++)a=s[u],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(c)},t=self["webpackChunkworkflow"]=self["webpackChunkworkflow"]||[];t.forEach(l.bind(null,0)),t.push=l.bind(null,t.push.bind(t))}();var t=o.O(void 0,[504],(function(){return o(4049)}));t=o.O(t)})();
//# sourceMappingURL=app.c153a635.js.map